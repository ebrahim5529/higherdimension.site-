import{r as m,j as e,H as w,a as C}from"./app-JuT9i8Nu.js";import{D as S}from"./DashboardLayout-Mi_rkm2X.js";import{C as x,a as c,b as F,c as D}from"./card-Bylfs8ZR.js";import{B as _}from"./button-B5dkCZVx.js";import{I as j}from"./input-Fxgf3LeS.js";import{F as I}from"./filter-fiA2EtBl.js";import{F as h}from"./file-text-3qDLBxfl.js";/* empty css            */import"./createLucideIcon-Dpb_xsff.js";import"./triangle-alert-0jWxApMi.js";import"./x-DUMZ2MyZ.js";import"./eye-YLqfSfxG.js";import"./shield-_HwMWS0e.js";import"./circle-alert-BNQrC8hC.js";import"./map-pin-7nJQb0p0.js";import"./mail-CaIkmxaV.js";function Q({items:s,accounts:y,selectedAccount:r,openingBalance:d,filters:n}){const[o,b]=m.useState(n.account_id||""),[g,N]=m.useState(n.date_from||""),[p,f]=m.useState(n.date_to||""),u=()=>{C.get("/accounting/reports/account-statement",{account_id:o||void 0,date_from:g||void 0,date_to:p||void 0},{preserveState:!0})},a=t=>t.toLocaleString("ar-SA",{minimumFractionDigits:2}),v=s.reduce((t,i)=>t+i.debit,0),k=s.reduce((t,i)=>t+i.credit,0),l=s.length>0?s[s.length-1].balance:d;return e.jsxs(S,{children:[e.jsx(w,{title:"كشف حساب"}),e.jsxs("div",{className:"space-y-6 mt-2 -mx-1 sm:-mx-2 lg:-mx-3 xl:-mx-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"كشف حساب"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"عرض حركات حساب محدد مع الرصيد التراكمي"})]}),e.jsx(x,{children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex flex-wrap items-end gap-4",children:[e.jsxs("div",{className:"min-w-[280px]",children:[e.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1 block",children:"الحساب *"}),e.jsxs("select",{className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm",value:o,onChange:t=>b(t.target.value),children:[e.jsx("option",{value:"",children:"اختر الحساب"}),y.map(t=>e.jsxs("option",{value:t.id,children:[t.code," - ",t.name]},t.id))]})]}),e.jsxs("div",{className:"min-w-[180px]",children:[e.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1 block",children:"من تاريخ"}),e.jsx(j,{type:"date",value:g,onChange:t=>N(t.target.value)})]}),e.jsxs("div",{className:"min-w-[180px]",children:[e.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1 block",children:"إلى تاريخ"}),e.jsx(j,{type:"date",value:p,onChange:t=>f(t.target.value)})]}),e.jsxs(_,{onClick:u,className:"bg-[#58d2c8] hover:bg-[#4AB8B3] text-white",disabled:!o,children:[e.jsx(I,{className:"h-4 w-4 ml-1"}),"عرض"]})]})})}),r&&e.jsxs(e.Fragment,{children:[e.jsx(x,{children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"رمز الحساب"}),e.jsx("div",{className:"font-mono font-bold text-lg",children:r.code})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"اسم الحساب"}),e.jsx("div",{className:"font-bold text-lg",children:r.name})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"الرصيد الافتتاحي"}),e.jsx("div",{className:"font-mono font-bold text-lg",children:a(d)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"الرصيد الختامي"}),e.jsx("div",{className:`font-mono font-bold text-lg ${l>=0?"text-green-600":"text-red-600"}`,children:a(l)})]})]})})}),e.jsxs(x,{children:[e.jsx(F,{children:e.jsxs(D,{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-5 w-5"}),"حركات الحساب",e.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",s.length," حركة)"]})]})}),e.jsx(c,{children:s.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(h,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"لا توجد حركات لهذا الحساب في الفترة المحددة"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-300 dark:border-gray-600",children:[e.jsx("th",{className:"text-right py-3 px-3 font-bold text-gray-700 dark:text-gray-300",children:"التاريخ"}),e.jsx("th",{className:"text-right py-3 px-3 font-bold text-gray-700 dark:text-gray-300",children:"رقم القيد"}),e.jsx("th",{className:"text-right py-3 px-3 font-bold text-gray-700 dark:text-gray-300",children:"الوصف"}),e.jsx("th",{className:"text-right py-3 px-3 font-bold text-gray-700 dark:text-gray-300",children:"مدين"}),e.jsx("th",{className:"text-right py-3 px-3 font-bold text-gray-700 dark:text-gray-300",children:"دائن"}),e.jsx("th",{className:"text-right py-3 px-3 font-bold text-gray-700 dark:text-gray-300",children:"الرصيد"})]})}),e.jsxs("tbody",{children:[d!==0&&e.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-800/50 font-medium",children:[e.jsx("td",{colSpan:5,className:"py-2 px-3",children:"الرصيد الافتتاحي"}),e.jsx("td",{className:"py-2 px-3 font-mono",children:a(d)})]}),s.map(t=>e.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[e.jsx("td",{className:"py-2 px-3",children:new Date(t.date).toLocaleDateString("ar-SA")}),e.jsx("td",{className:"py-2 px-3 font-mono text-[#58d2c8]",children:t.entry_number}),e.jsx("td",{className:"py-2 px-3 max-w-[250px] truncate",children:t.description}),e.jsx("td",{className:"py-2 px-3 font-mono",children:t.debit>0?a(t.debit):"-"}),e.jsx("td",{className:"py-2 px-3 font-mono",children:t.credit>0?a(t.credit):"-"}),e.jsx("td",{className:`py-2 px-3 font-mono font-medium ${t.balance>=0?"text-green-600":"text-red-600"}`,children:a(t.balance)})]},t.id))]}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"border-t-2 border-gray-400 dark:border-gray-500 font-bold bg-gray-50 dark:bg-gray-800",children:[e.jsx("td",{colSpan:3,className:"py-3 px-3",children:"الإجمالي"}),e.jsx("td",{className:"py-3 px-3 font-mono",children:a(v)}),e.jsx("td",{className:"py-3 px-3 font-mono",children:a(k)}),e.jsx("td",{className:`py-3 px-3 font-mono ${l>=0?"text-green-600":"text-red-600"}`,children:a(l)})]})})]})})})]})]}),!r&&e.jsx(x,{children:e.jsxs(c,{className:"p-12 text-center text-gray-500",children:[e.jsx(h,{className:"h-16 w-16 mx-auto mb-4 opacity-30"}),e.jsx("p",{className:"text-lg",children:"اختر حساباً لعرض كشف الحساب"})]})})]})]})}export{Q as default};
