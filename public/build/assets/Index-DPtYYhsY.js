import{u as j,a as d,j as e,H as N,r as l}from"./app-CONDmo9A.js";import{D as u,a as f,P as y,j as b,b as v}from"./DashboardLayout-BPsSLmbd.js";import{s as r}from"./use-toast-DmxNXA8L.js";import{B as i}from"./button-B6dOx6gm.js";import{E as w}from"./eye-CoNGtWIh.js";import{S}from"./square-pen-Bc0rmJNp.js";import{T as D}from"./trash-2-DkA9d6V6.js";/* empty css            */import"./createLucideIcon-DGnkID90.js";import"./triangle-alert-BtrJKYoD.js";import"./file-text-n36sxuUg.js";import"./map-pin-mbm9Cvun.js";import"./mail-DiqatmSx.js";function q({salaries:c,stats:a}){const{flash:t}=j().props,[o,x]=d.useState(!1),[m,n]=d.useState(null);d.useEffect(()=>{t?.success&&r.success("نجح",t.success),t?.error&&r.error("خطأ",t.error)},[t]);const h=(s,g)=>{n({id:s,name:g}),x(!0)},p=()=>{m&&l.delete(`/employees/salaries/${m.id}`,{onSuccess:()=>{r.success("نجح","تم حذف الراتب بنجاح"),x(!1),n(null)},onError:s=>{r.error("فشل الحذف",s?.message||"حدث خطأ أثناء حذف الراتب")}})};return e.jsxs(u,{children:[e.jsx(N,{title:"الرواتب"}),e.jsxs("div",{className:"space-y-6 mt-2 -mx-1 sm:-mx-2 lg:-mx-3 xl:-mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-5 w-5"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"الرواتب"})]}),e.jsxs(i,{onClick:()=>l.visit("/employees/salaries/create"),className:"flex items-center gap-2 bg-[#913D95] hover:bg-[#7A2F7D]",children:[e.jsx(y,{className:"h-4 w-4"}),"إضافة راتب جديد"]})]}),e.jsxs("div",{className:"space-y-6 mt-2 -mx-1 sm:-mx-2 lg:-mx-3 xl:-mx-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-5 w-5"}),e.jsx("h2",{className:"text-xl font-semibold",children:"إحصائيات الرواتب"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-sm text-gray-600 mb-2",children:"إجمالي الرواتب"}),e.jsx("div",{className:"text-2xl font-bold text-[#913D95]",children:a.totalSalaries})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-sm text-gray-600 mb-2",children:"إجمالي المبلغ"}),e.jsxs("div",{className:"text-2xl font-bold text-[#913D95]",children:[a.totalAmount.toLocaleString()," ر.ع"]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-sm text-gray-600 mb-2",children:"مدفوعة"}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:a.paidSalaries})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-sm text-gray-600 mb-2",children:"متوسطة الراتب"}),e.jsxs("div",{className:"text-2xl font-bold text-[#913D95]",children:[a.averageSalary.toLocaleString()," ر.ع"]})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"قائمة الرواتب"}),c.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-900",children:"الموظف"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-900",children:"الراتب الأساسي"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-900",children:"البدلات"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-900",children:"الخصومات"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-900",children:"الإجمالي"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-900",children:"تاريخ الدفع"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-900",children:"الحالة"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-900",children:"الإجراءات"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:c.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.employeeName}),e.jsx("div",{className:"text-xs text-gray-500",children:s.employeeId})]})}),e.jsxs("td",{className:"px-4 py-3 text-sm",children:[s.basicSalary.toLocaleString()," ر.ع"]}),e.jsxs("td",{className:"px-4 py-3 text-sm",children:[s.allowances.toLocaleString()," ر.ع"]}),e.jsxs("td",{className:"px-4 py-3 text-sm",children:[s.deductions.toLocaleString()," ر.ع"]}),e.jsxs("td",{className:"px-4 py-3 text-sm font-medium text-[#913D95]",children:[s.totalSalary.toLocaleString()," ر.ع"]}),e.jsx("td",{className:"px-4 py-3 text-sm",children:s.paymentDate}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.status==="paid"?"bg-green-100 text-green-800":s.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.status==="paid"?"مدفوعة":s.status==="pending"?"في الانتظار":"متأخرة"})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>l.visit(`/employees/salaries/${s.id}`),className:"h-8 w-8 p-0",children:e.jsx(w,{className:"h-4 w-4"})}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>l.visit(`/employees/salaries/${s.id}/edit`),className:"h-8 w-8 p-0",children:e.jsx(S,{className:"h-4 w-4"})}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>h(s.id,s.employeeName),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700",children:e.jsx(D,{className:"h-4 w-4"})})]})})]},s.id))})]})}):e.jsx("p",{className:"text-center text-gray-500 py-8",children:"لا توجد رواتب"})]})})]}),e.jsx(v,{open:o,onOpenChange:x,onConfirm:p,title:"تأكيد حذف الراتب",description:`هل أنت متأكد من حذف راتب الموظف "${m?.name}"؟ لا يمكن التراجع عن هذا الإجراء.`,confirmText:"حذف",cancelText:"إلغاء",variant:"danger"})]})}export{q as default};
