import{a as o,j as e}from"./app-h_CyTutG.js";import{S as E,P as N}from"./DashboardLayout-DuEpl8bC.js";const F=[{value:"INDIVIDUAL",label:"فرد"},{value:"COMPANY",label:"شركة"}],L=[{value:"ACTIVE",label:"نشط"},{value:"INACTIVE",label:"غير نشط"},{value:"SUSPENDED",label:"معلق"}],A=["عماني","سعودي","إماراتي","كويتي","قطري","بحريني","مصري","سوري","لبناني","أردني","فلسطيني","عراقي","يمني","سوداني","مغربي","تونسي","جزائري","ليبي","أخرى"];function z({value:h,onChange:u,disabled:x=!1,label:b="الجنسية",required:j=!1}){const[i,m]=o.useState([]),[s,d]=o.useState(""),[w,n]=o.useState(!1),[v,l]=o.useState(!1),[r,a]=o.useState("");o.useEffect(()=>{m([...A])},[]);const g=i.filter(t=>{const c=s.toLowerCase();return t.toLowerCase().includes(c)}),p=i.some(t=>t.toLowerCase()===s.toLowerCase()),f=h||"",S=t=>{console.log("NationalitySelector: handleSelect called with:",t),u(t),n(!1),d("")},C=()=>{u(""),d("")},y=()=>{if(r.trim()&&!i.includes(r.trim())){const t=[...i,r.trim()];m(t),u(r.trim()),a(""),l(!1),n(!1),d("")}},k=t=>{const c=t.target.value;d(c),n(!0),c&&!p&&c.length>0};return e.jsxs("div",{className:"relative",children:[b&&e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[b," ",j&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:f||s,onChange:k,onFocus:()=>n(!0),placeholder:"ابحث عن الجنسية أو أدخل جنسية جديدة...",disabled:x,className:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#58d2c8] focus:border-transparent bg-white disabled:bg-gray-100 disabled:cursor-not-allowed"}),e.jsx(E,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),f&&!x&&e.jsx("button",{type:"button",onClick:C,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:"×"})]}),w&&!x&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>n(!1)}),e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto z-20",children:g.length>0?e.jsxs(e.Fragment,{children:[g.map(t=>e.jsx("button",{type:"button",onClick:()=>S(t),className:`w-full text-right px-4 py-3 hover:bg-[#58d2c8]/10 transition-colors border-b border-gray-100 last:border-b-0 ${h===t?"bg-[#58d2c8]/20":""}`,children:e.jsx("div",{className:"font-medium text-gray-900",children:t})},t)),s&&!p&&e.jsx("button",{type:"button",onClick:()=>{a(s),l(!0)},className:"w-full text-right px-4 py-3 hover:bg-blue-50 transition-colors border-t border-gray-200 bg-blue-50/50",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-600 font-medium",children:[e.jsx(N,{className:"h-4 w-4"}),'إضافة "',s,'" كجنسية جديدة']})})]}):e.jsx("div",{className:"px-4 py-3",children:s?e.jsx("button",{type:"button",onClick:()=>{a(s),l(!0)},className:"w-full text-right px-4 py-3 hover:bg-blue-50 transition-colors rounded-lg bg-blue-50/50",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-600 font-medium",children:[e.jsx(N,{className:"h-4 w-4"}),'إضافة "',s,'" كجنسية جديدة']})}):e.jsx("div",{className:"text-center text-gray-500",children:"لا توجد نتائج"})})})]}),v&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-30 bg-black/50",onClick:()=>{l(!1),a("")}}),e.jsxs("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-40 bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"إضافة جنسية جديدة"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["اسم الجنسية ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:r,onChange:t=>a(t.target.value),placeholder:"أدخل اسم الجنسية",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#58d2c8] focus:border-transparent",autoFocus:!0,onKeyDown:t=>{t.key==="Enter"?(t.preventDefault(),y()):t.key==="Escape"&&(l(!1),a(""))}})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{l(!1),a("")},className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"إلغاء"}),e.jsx("button",{type:"button",onClick:y,disabled:!r.trim(),className:"px-4 py-2 bg-[#58d2c8] text-white rounded-lg hover:bg-[#4AB8B3] transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:"إضافة"})]})]})]})]})]})}export{z as N,L as a,F as s};
