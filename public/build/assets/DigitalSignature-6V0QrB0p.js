import{r as u,j as s}from"./app-D82DrFCd.js";import{D as E}from"./download-KcM1btki.js";import{T as L}from"./trash-2-DX8wrPSz.js";function F({onSignatureComplete:w,onSignatureClear:S,width:a=400,height:l=200,strokeColor:y="#000000",strokeWidth:D=2,backgroundColor:f="#ffffff",disabled:x=!1,placeholder:g="اضغط هنا للتوقيع"}){const c=u.useRef(null),[b,j]=u.useState(!1),[T,R]=u.useState(!1),[Y,A]=u.useState("");u.useEffect(()=>{const e=c.current;if(!e)return;const t=e.getContext("2d");t&&(t.strokeStyle=y,t.lineWidth=D,t.lineCap="round",t.lineJoin="round",t.fillStyle=f,t.fillRect(0,0,a,l),t.fillStyle="#9CA3AF",t.font="16px Arial",t.textAlign="center",t.fillText(g,a/2,l/2))},[a,l,y,D,f,g]);const N=e=>{if(x)return;j(!0);const t=c.current;if(!t)return;const r=t.getContext("2d");if(!r)return;const n=t.getBoundingClientRect(),m=t.width/n.width,p=t.height/n.height;let o,i;"touches"in e?(o=e.touches[0].clientX,i=e.touches[0].clientY):(o=e.clientX,i=e.clientY);const h=(o-n.left)*m,v=(i-n.top)*p;r.beginPath(),r.moveTo(h,v)},X=e=>{if(!b||x)return;const t=c.current;if(!t)return;const r=t.getContext("2d");if(!r)return;const n=t.getBoundingClientRect(),m=t.width/n.width,p=t.height/n.height;let o,i;"touches"in e?(o=e.touches[0].clientX,i=e.touches[0].clientY):(o=e.clientX,i=e.clientY);const h=(o-n.left)*m,v=(i-n.top)*p;r.lineTo(h,v),r.stroke()},d=()=>{if(!b)return;j(!1),R(!0);const e=c.current;if(e&&w){const t=e.toDataURL("image/png");A(t),w(t)}},C=()=>{const e=c.current;if(!e)return;const t=e.getContext("2d");t&&(t.fillStyle=f,t.fillRect(0,0,a,l),t.fillStyle="#9CA3AF",t.font="16px Arial",t.textAlign="center",t.fillText(g,a/2,l/2),R(!1),A(""),S&&S())},M=()=>{if(!T||!c.current)return;const e=document.createElement("a");e.download=`توقيع_${new Date().toISOString().split("T")[0]}.png`,e.href=Y,e.click()};return s.jsxs("div",{className:"w-full",children:[s.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 bg-gray-50",children:s.jsx("canvas",{ref:c,width:a,height:l,className:`border border-gray-300 rounded cursor-crosshair ${x?"opacity-50 cursor-not-allowed":""}`,onMouseDown:N,onMouseMove:X,onMouseUp:d,onMouseLeave:d,onTouchStart:N,onTouchMove:X,onTouchEnd:d})}),T&&s.jsxs("div",{className:"flex items-center justify-center gap-2 mt-3",children:[s.jsxs("button",{onClick:M,className:"flex items-center gap-2 px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[s.jsx(E,{className:"h-4 w-4"}),"تحميل التوقيع"]}),s.jsxs("button",{onClick:C,className:"flex items-center gap-2 px-3 py-1.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:[s.jsx(L,{className:"h-4 w-4"}),"مسح التوقيع"]})]})]})}export{F as D};
