import{r as t,u as g,j as e,H as f,a as n}from"./app-D5GchK2n.js";import{B as i}from"./button-CjRbmYRh.js";import{I as p}from"./input-CfCtb6rZ.js";import{C as j,a as y,b as N,c as k,d as v}from"./card-J0aNvoEZ.js";import{s as a}from"./use-toast-DD5-stEh.js";import{S as w}from"./shield-cHwbiQva.js";import{M as C}from"./mail-C76QzjyZ.js";import{c as M}from"./createLucideIcon-BJBO5Me8.js";/* empty css            */const S=M("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);function B({email:m,flash:r}){const[d,o]=t.useState(""),[x,u]=t.useState(!1),s=g({code:""});t.useEffect(()=>{u(!0)},[]),t.useEffect(()=>{r?.success&&a.success("نجح",r.success),r?.error&&a.error("خطأ",r.error)},[r]),t.useEffect(()=>{window.location.pathname},[]);const h=c=>{c.preventDefault(),s.post("/two-factor/challenge",{preserveScroll:!0,onSuccess:()=>{n.visit("/dashboard")},onError:()=>{o("")}})},b=()=>{n.post("/two-factor/resend",{},{onSuccess:()=>{a.success("نجح","تم إرسال رمز التحقق إلى بريدك الإلكتروني")},onError:()=>{a.error("خطأ","فشل إرسال الرمز. يرجى المحاولة مرة أخرى")}})};return x?e.jsxs(e.Fragment,{children:[e.jsx(f,{title:"التحقق من المصادقة الثنائية"}),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs(j,{className:"shadow-xl border-0 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm",children:[e.jsxs(y,{className:"space-y-1 text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center mb-4",children:e.jsx(w,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"})}),e.jsx(N,{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"التحقق من المصادقة الثنائية"}),e.jsx(k,{className:"text-gray-600 dark:text-gray-400",children:"تم إرسال رمز التحقق إلى بريدك الإلكتروني"})]}),e.jsx(v,{children:e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx(C,{className:"h-5 w-5 text-gray-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"البريد الإلكتروني"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:m})]})]}),e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 text-center",children:"يرجى فتح بريدك الإلكتروني وإدخال رمز التحقق المكون من 6 أرقام"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"code",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"رمز التحقق (6 أرقام)"}),e.jsx(p,{id:"code",type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:6,placeholder:"000000",value:d,onChange:c=>{const l=c.target.value.replace(/\D/g,"").slice(0,6);o(l),s.setData("code",l)},className:"text-center text-2xl font-mono tracking-widest bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600",required:!0,autoFocus:!0}),s.errors.code&&e.jsx("p",{className:"text-sm text-red-500",children:s.errors.code})]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs(i,{type:"button",variant:"ghost",onClick:b,className:"text-sm",children:[e.jsx(S,{className:"h-4 w-4 ml-2"}),"إعادة إرسال الرمز"]})}),e.jsx(i,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white",disabled:d.length!==6,children:"تحقق"})]})})]})})})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"جاري التحميل..."})]})})}export{B as default};
