import{c as b}from"./createLucideIcon-DKn4dUsE.js";import{a as r,j as e}from"./app-oenMWVKL.js";import{S as N}from"./DashboardLayout-D_fa5wd8.js";const w=b("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);function L({value:i,onChange:o,disabled:l=!1}){const[d,p]=r.useState([]),[u,x]=r.useState(!1),[m,c]=r.useState(""),[g,n]=r.useState(!1);r.useEffect(()=>{f()},[]);const f=async()=>{x(!0);try{const s=await fetch("/api/scaffolds/available");if(s.ok){const a=await s.json();a.success&&a.data&&p(a.data)}}catch(s){console.error("خطأ في تحميل السقالات:",s)}finally{x(!1)}},h=d.filter(s=>{const a=m.toLowerCase();return s.scaffold_number?.toLowerCase().includes(a)||s.description_ar?.toLowerCase().includes(a)||s.description_en?.toLowerCase().includes(a)}),t=d.find(s=>s.id.toString()===i?.toString()),y=s=>{o(s),n(!1),c("")},j=()=>{o(null),c("")};return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:t?`${t.scaffold_number} - ${t.description_ar||t.description_en||""}`:m,onChange:s=>{c(s.target.value),n(!0)},onFocus:()=>n(!0),placeholder:"ابحث عن سقالة...",disabled:l,className:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#58d2c8] focus:border-transparent bg-white disabled:bg-gray-100 disabled:cursor-not-allowed"}),e.jsx(N,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),t&&!l&&e.jsx("button",{type:"button",onClick:j,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:"×"})]}),g&&!l&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>n(!1)}),e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-80 overflow-y-auto z-20",children:u?e.jsx("div",{className:"px-4 py-3 text-center text-gray-500",children:"جاري تحميل السقالات..."}):h.length>0?h.map(s=>e.jsx("button",{type:"button",onClick:()=>y(s),className:`w-full text-right px-4 py-3 hover:bg-[#58d2c8]/10 transition-colors border-b border-gray-100 last:border-b-0 ${i?.toString()===s.id.toString()?"bg-[#58d2c8]/20":""}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.scaffold_number}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:s.description_ar||s.description_en||"—"})]}),e.jsxs("div",{className:"text-left mr-4",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["متاح: ",s.available_quantity]}),e.jsxs("div",{className:"text-sm font-medium text-[#58d2c8]",children:[s.monthly_rental_price?.toLocaleString()||0," ر.ع/شهر"]})]})]})},s.id)):e.jsx("div",{className:"px-4 py-3 text-center text-gray-500",children:"لا توجد سقالات متاحة"})})]}),t&&e.jsx("div",{className:"mt-2 p-3 bg-[#58d2c8]/5 rounded-lg border border-[#58d2c8]/20",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[t.description_ar&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"الوصف العربي:"}),e.jsx("span",{className:"font-medium mr-2",children:t.description_ar})]}),t.description_en&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"الوصف الإنجليزي:"}),e.jsx("span",{className:"font-medium mr-2",children:t.description_en})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2 border-t border-gray-200",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"السعر اليومي:"}),e.jsxs("span",{className:"font-medium mr-2 text-[#58d2c8]",children:[t.daily_rental_price?.toLocaleString()||0," ر.ع"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"السعر الشهري:"}),e.jsxs("span",{className:"font-medium mr-2 text-[#58d2c8]",children:[t.monthly_rental_price?.toLocaleString()||0," ر.ع"]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-gray-600",children:"الكمية المتاحة:"}),e.jsx("span",{className:"font-medium mr-2 text-green-600",children:t.available_quantity})]})]})]})})]})}export{w as M,L as S};
