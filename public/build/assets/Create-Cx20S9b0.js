import{u as g,a as f,b as v,j as e,H as N,r as d}from"./app-CgSVc5Wn.js";import{D as y,B as p}from"./DashboardLayout-BIO_sjjx.js";import{C,b as k,c as w,a as D}from"./card-Dywtg_PO.js";import{B as n}from"./button-BGcazaoI.js";import{I as m}from"./input-CkIX0MbD.js";import{s as o}from"./use-toast-DoooC-Gp.js";import{C as h}from"./combobox-pUWr8itd.js";import{A as E}from"./arrow-left-CdBicERm.js";import{M as S}from"./map-pin-Bxy-YAXy.js";import{D as T}from"./user-GZG2W0xx.js";import{S as A}from"./save-Ba30BxBM.js";/* empty css            */import"./eye-Cjz6YKgE.js";import"./dialog-ptjPhv06.js";import"./index-CBa_YVis.js";import"./check-Bj4NjL_D.js";function O({managers:u}){const{flash:i}=g().props;f.useEffect(()=>{i?.success&&o.success("نجح",i.success),i?.error&&o.error("خطأ",i.error)},[i]);const{data:t,setData:r,post:b,processing:c,errors:l}=v({name:"",code:"",manager_id:"",description:"",status:"ACTIVE",location:"",budget:""}),j=s=>{s.preventDefault();const a={...t};a.manager_id||delete a.manager_id,a.description||delete a.description,a.location||delete a.location,a.budget||delete a.budget,b("/employees/departments",{data:a,onSuccess:()=>{o.success("تم الإنشاء بنجاح","تم إضافة القسم بنجاح"),d.visit("/employees/departments")},onError:x=>{x.message?o.error("خطأ في الإنشاء",x.message):o.error("خطأ في الإنشاء","يرجى التحقق من البيانات المدخلة")}})};return e.jsxs(y,{children:[e.jsx(N,{title:"إضافة قسم جديد"}),e.jsxs("div",{className:"space-y-6 mt-2 -mx-1 sm:-mx-2 lg:-mx-3 xl:-mx-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>d.visit("/employees/departments"),children:e.jsx(E,{className:"h-4 w-4"})}),e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(p,{className:"h-6 w-6"}),"إضافة قسم جديد"]})]})}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs(C,{children:[e.jsx(k,{children:e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-5 w-5"}),"معلومات القسم"]})}),e.jsx(D,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["اسم القسم ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{type:"text",value:t.name,onChange:s=>r("name",s.target.value),placeholder:"أدخل اسم القسم",className:l.name?"border-red-500":""}),l.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["رمز القسم ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{type:"text",value:t.code,onChange:s=>r("code",s.target.value),placeholder:"أدخل رمز القسم",className:l.code?"border-red-500":""}),l.code&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.code})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"المدير"}),e.jsx(h,{options:u.map(s=>({value:s.id.toString(),label:`${s.name} (${s.position})`})),value:t.manager_id,onValueChange:s=>r("manager_id",s),placeholder:"اختر المدير",searchPlaceholder:"ابحث عن المدير...",emptyText:"لا يوجد مديرين"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["الحالة ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(h,{options:[{value:"ACTIVE",label:"نشط"},{value:"INACTIVE",label:"غير نشط"}],value:t.status,onValueChange:s=>r("status",s),placeholder:"اختر الحالة",searchPlaceholder:"ابحث...",emptyText:"لا توجد نتائج"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"الموقع"}),e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(m,{type:"text",value:t.location,onChange:s=>r("location",s.target.value),placeholder:"أدخل موقع القسم",className:"pr-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"الميزانية"}),e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(m,{type:"number",step:"0.01",min:"0",value:t.budget,onChange:s=>r("budget",s.target.value),placeholder:"0.00",className:"pr-10"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"الوصف"}),e.jsx("textarea",{value:t.description,onChange:s=>r("description",s.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-gray-800 dark:text-white",placeholder:"أدخل وصف القسم"})]})]})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t",children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>d.visit("/employees/departments"),disabled:c,children:"إلغاء"}),e.jsxs(n,{type:"submit",disabled:c,className:"flex items-center gap-2 bg-[#913D95] hover:bg-[#7A2F7D]",children:[e.jsx(A,{className:"h-4 w-4"}),c?"جاري الحفظ...":"حفظ القسم"]})]})]})]})]})}export{O as default};
