import{j as e,r as c,u as $,H as z,a as N}from"./app-DC70pVjm.js";import{c as S,m as M,d as U,T as k,S as _,C as O,P as F,j as B,D as H,n as R,f as V}from"./DashboardLayout-hjp-9ivh.js";import{B as l}from"./button-CCsAHJj1.js";import{F as q}from"./filter-F_yL7SdF.js";import{C as G}from"./chevron-up-VRDMnj_A.js";import{D as J}from"./download-BLwmAVtj.js";import{E as K}from"./eye-DDqfhxOU.js";import{S as Q}from"./square-pen-B58tuuo9.js";import{T as W}from"./trash-2-C7a61DKz.js";import{C as X}from"./chevron-left-CXDP4PHu.js";import{s as g}from"./use-toast-weOckxar.js";/* empty css            */import"./createLucideIcon-gXsaNq4V.js";import"./triangle-alert-Dwooo7My.js";import"./file-text-j4Qn0fru.js";import"./shield-5CH0y752.js";import"./circle-alert-CnKodfJj.js";import"./map-pin-BBAWf8o9.js";import"./mail-BERZcaE2.js";function Y({stats:a}){return a?e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:bg-[#913D95]/5 hover:border-[#913D95]/30 hover:shadow-lg hover:shadow-[#913D95]/20 hover:scale-105 transition-all duration-300 cursor-pointer group min-h-[100px]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm text-gray-600 group-hover:text-[#913D95] transition-colors duration-300 font-almarai mb-2",children:"إجمالي الموظفين"}),e.jsx("div",{className:"text-2xl font-bold text-[#913D95] group-hover:text-[#7A2F7D] transition-colors duration-300 font-tajawal",children:a.totalEmployees||0}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[a.activeEmployees||0," نشط، ",a.inactiveEmployees||0," غير نشط"]})]}),e.jsx("div",{className:"p-2 bg-[#913D95]/10 rounded-lg group-hover:bg-[#913D95]/20 transition-all duration-300",children:e.jsx(S,{className:"h-5 w-5 text-[#913D95] group-hover:scale-110 transition-transform duration-300"})})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:bg-[#913D95]/5 hover:border-[#913D95]/30 hover:shadow-lg hover:shadow-[#913D95]/20 hover:scale-105 transition-all duration-300 cursor-pointer group min-h-[100px]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm text-gray-600 group-hover:text-[#913D95] transition-colors duration-300 font-almarai mb-2",children:"الموظفين النشطين"}),e.jsx("div",{className:"text-2xl font-bold text-[#913D95] group-hover:text-[#7A2F7D] transition-colors duration-300 font-tajawal",children:a.activeEmployees||0}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[a.totalEmployees>0?(a.activeEmployees/a.totalEmployees*100).toFixed(1):0,"% من إجمالي الموظفين"]})]}),e.jsx("div",{className:"p-2 bg-[#913D95]/10 rounded-lg group-hover:bg-[#913D95]/20 transition-all duration-300",children:e.jsx(M,{className:"h-5 w-5 text-[#913D95] group-hover:scale-110 transition-transform duration-300"})})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:bg-[#913D95]/5 hover:border-[#913D95]/30 hover:shadow-lg hover:shadow-[#913D95]/20 hover:scale-105 transition-all duration-300 cursor-pointer group min-h-[100px]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm text-gray-600 group-hover:text-[#913D95] transition-colors duration-300 font-almarai mb-2",children:"متوسط الراتب"}),e.jsxs("div",{className:"text-2xl font-bold text-[#913D95] group-hover:text-[#7A2F7D] transition-colors duration-300 font-tajawal",children:[a.averageSalary?.toLocaleString()||0," ر.ع"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"شهرياً"})]}),e.jsx("div",{className:"p-2 bg-[#913D95]/10 rounded-lg group-hover:bg-[#913D95]/20 transition-all duration-300",children:e.jsx(U,{className:"h-5 w-5 text-[#913D95] group-hover:scale-110 transition-transform duration-300"})})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:bg-[#913D95]/5 hover:border-[#913D95]/30 hover:shadow-lg hover:shadow-[#913D95]/20 hover:scale-105 transition-all duration-300 cursor-pointer group min-h-[100px]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm text-gray-600 group-hover:text-[#913D95] transition-colors duration-300 font-almarai mb-2",children:"إجمالي تكلفة الرواتب"}),e.jsxs("div",{className:"text-2xl font-bold text-[#913D95] group-hover:text-[#7A2F7D] transition-colors duration-300 font-tajawal",children:[a.totalSalaryCost?.toLocaleString()||0," ر.ع"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"شهرياً"})]}),e.jsx("div",{className:"p-2 bg-[#913D95]/10 rounded-lg group-hover:bg-[#913D95]/20 transition-all duration-300",children:e.jsx(k,{className:"h-5 w-5 text-[#913D95] group-hover:scale-110 transition-transform duration-300"})})]})})]})}):e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"})]})})})})}function Z({data:a,onAddEmployee:f,onEditEmployee:n,onDeleteEmployee:y,onViewEmployee:d,onExportEmployees:o,isLoading:p=!1}){const[m,u]=c.useState(""),[x,b]=c.useState(!1),[i,j]=c.useState(1),h=10,t=s=>({active:"نشط",inactive:"غير نشط",on_leave:"في إجازة"})[s]||s,L=s=>({active:"bg-green-100 text-green-800",inactive:"bg-red-100 text-red-800",on_leave:"bg-yellow-100 text-yellow-800"})[s]||"bg-gray-100 text-gray-800",v=a.filter(s=>{if(m){const r=m.toLowerCase(),T=s.name?.toLowerCase()||"",A=s.employeeId?.toLowerCase()||"",I=s.position?.toLowerCase()||"",P=s.department?.toLowerCase()||"";if(!T.includes(r)&&!A.includes(r)&&!I.includes(r)&&!P.includes(r))return!1}return!0}),w=Math.ceil(v.length/h),D=(i-1)*h,C=D+h,E=v.slice(D,C);return p?e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((s,r)=>e.jsx("div",{className:"h-4 bg-gray-200 rounded"},r))})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 sm:gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(_,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:"البحث في الموظفين...",value:m,onChange:s=>u(s.target.value),className:"w-full pr-10 pl-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent text-sm sm:text-base"})]}),e.jsxs(l,{variant:"outline",onClick:()=>b(!x),className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4"}),"فلاتر",x?e.jsx(G,{className:"h-4 w-4"}):e.jsx(O,{className:"h-4 w-4"})]}),e.jsxs(l,{onClick:f,className:"flex items-center gap-2 bg-[#913D95] hover:bg-[#7A2F7D]",children:[e.jsx(F,{className:"h-4 w-4"}),"إضافة موظف"]}),e.jsxs(l,{variant:"outline",onClick:o,className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4"}),"تصدير"]})]}),x&&e.jsx("div",{className:"p-3 sm:p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-600",children:"لا توجد فلاتر متاحة حالياً"})})]}),e.jsx("div",{className:"rounded-md border overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[800px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-gray-50",children:[e.jsx("th",{className:"px-2 py-3 text-right text-sm font-medium text-gray-900 dark:text-gray-100 whitespace-nowrap",children:"الموظف"}),e.jsx("th",{className:"px-2 py-3 text-right text-sm font-medium text-gray-900 dark:text-gray-100 whitespace-nowrap",children:"المنصب"}),e.jsx("th",{className:"px-2 py-3 text-right text-sm font-medium text-gray-900 dark:text-gray-100 whitespace-nowrap",children:"القسم"}),e.jsx("th",{className:"px-2 py-3 text-right text-sm font-medium text-gray-900 dark:text-gray-100 whitespace-nowrap",children:"الراتب"}),e.jsx("th",{className:"px-2 py-3 text-right text-sm font-medium text-gray-900 dark:text-gray-100 whitespace-nowrap",children:"الحالة"}),e.jsx("th",{className:"px-2 py-3 text-right text-sm font-medium text-gray-900 dark:text-gray-100 whitespace-nowrap",children:"الإجراءات"})]})}),e.jsx("tbody",{children:E.length>0?E.map(s=>e.jsxs("tr",{className:"border-b hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[e.jsx("td",{className:"px-2 py-3 text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-shrink-0 h-8 w-8",children:e.jsx("div",{className:"h-8 w-8 rounded-full bg-[#913D95]/10 flex items-center justify-center",children:e.jsx("span",{className:"text-[#913D95] font-medium text-xs",children:s.name.split(" ").map(r=>r[0]).join("").slice(0,2)})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-[#913D95]",children:s.name}),e.jsx("div",{className:"text-xs text-gray-500",children:s.employeeId})]})]})}),e.jsx("td",{className:"px-2 py-3 text-sm",children:e.jsx("div",{className:"text-sm text-gray-700",children:s.position})}),e.jsx("td",{className:"px-2 py-3 text-sm",children:e.jsx("div",{className:"text-sm text-gray-700",children:s.department})}),e.jsx("td",{className:"px-2 py-3 text-sm",children:e.jsxs("div",{className:"text-sm font-medium text-[#913D95]",children:[s.salary.toLocaleString()," ر.ع"]})}),e.jsx("td",{className:"px-2 py-3 text-sm",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${L(s.status)}`,children:t(s.status)})}),e.jsx("td",{className:"px-2 py-3 text-sm",children:e.jsxs("div",{className:"flex items-center gap-0.5",children:[e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>d(s),className:"h-6 w-6 p-0 hover:bg-blue-100",title:"عرض التفاصيل",children:e.jsx(K,{className:"h-3 w-3 text-blue-600"})}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>n(s),className:"h-6 w-6 p-0 hover:bg-green-100",title:"تعديل",children:e.jsx(Q,{className:"h-3 w-3 text-green-600"})}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>y(s),className:"h-6 w-6 p-0 hover:bg-red-100",title:"حذف",children:e.jsx(W,{className:"h-3 w-3 text-red-600"})})]})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"h-24 text-center text-gray-500",children:"لا يوجد موظفين"})})})]})})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["عرض ",D+1," إلى ",Math.min(C,v.length)," من"," ",v.length," موظف"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>j(Math.max(1,i-1)),disabled:i===1,className:"flex items-center gap-1",children:[e.jsx(B,{className:"h-4 w-4"}),"السابق"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"صفحة"}),e.jsxs("span",{className:"font-medium",children:[i," من ",w]})]}),e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>j(Math.min(w,i+1)),disabled:i===w,className:"flex items-center gap-1",children:["التالي",e.jsx(X,{className:"h-4 w-4"})]})]})]})]})}function Ne({employees:a,stats:f}){const{flash:n}=$().props,[y,d]=c.useState(!1),[o,p]=c.useState(null);c.useEffect(()=>{n?.success&&g.success("نجح",n.success),n?.error&&g.error("خطأ",n.error)},[n]);const m=a.map(t=>({id:t.id.toString(),employeeId:t.employeeId,name:t.name,position:t.position,department:t.department,email:t.email,phone:t.phone,hireDate:t.hireDate,status:t.status,salary:t.salary,manager:t.manager,location:t.location})),u=()=>{N.visit("/employees/create")},x=t=>{N.visit(`/employees/${t.id}/edit`)},b=t=>{p({id:parseInt(t.id),name:t.name}),d(!0)},i=()=>{o&&N.delete(`/employees/${o.id}`,{onSuccess:()=>{g.success("تم الحذف بنجاح",`تم حذف الموظف "${o.name}" بنجاح`),d(!1),p(null)},onError:t=>{g.error("فشل الحذف",t?.message||"حدث خطأ أثناء حذف الموظف")}})},j=t=>{N.visit(`/employees/${t.id}`)},h=()=>{g.info("تصدير البيانات","جارٍ تصدير بيانات الموظفين...")};return e.jsxs(H,{children:[e.jsx(z,{title:"إدارة الموظفين"}),e.jsxs("div",{className:"w-full space-y-6 mt-2 -mx-1 sm:-mx-2 lg:-mx-3 xl:-mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5"}),e.jsx("h2",{className:"text-xl font-semibold",children:"الموظفين"})]}),e.jsxs(l,{onClick:u,className:"flex items-center gap-2 bg-[#913D95] hover:bg-[#7A2F7D]",children:[e.jsx(F,{className:"h-4 w-4"}),"إضافة موظف جديد"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5"}),e.jsx("h2",{className:"text-xl font-semibold",children:"إحصائيات الموظفين"})]}),e.jsx(Y,{stats:f})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-5 w-5"}),e.jsx("h2",{className:"text-xl font-semibold",children:"قائمة الموظفين"})]}),e.jsx(Z,{data:m,onAddEmployee:u,onEditEmployee:x,onDeleteEmployee:b,onViewEmployee:j,onExportEmployees:h})]}),e.jsx(V,{open:y,onOpenChange:d,onConfirm:i,title:"تأكيد حذف الموظف",description:`هل أنت متأكد من حذف الموظف "${o?.name}"؟ لا يمكن التراجع عن هذا الإجراء.`,confirmText:"حذف",cancelText:"إلغاء",variant:"danger"})]})]})}export{Ne as default};
