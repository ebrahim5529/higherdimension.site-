import{b as v,r as f,u as g,j as e,H as y,a as n}from"./app-84_vxQdS.js";import{D as N,C as h,c as _}from"./DashboardLayout-BlAKKRWk.js";import{C as k,a as C,b as w,d as D}from"./card-eaxFl7Bs.js";import{B as d}from"./button-BjYYNMND.js";import{I as i}from"./input-Cl715XOF.js";import{s as c}from"./use-toast-CojTFCbM.js";import{C as p}from"./combobox-DAd9HnJJ.js";import{A as S}from"./arrow-left-EPoubND8.js";import{F as H}from"./file-text-1z2HdD-B.js";import{S as T}from"./save-DTlifEli.js";/* empty css            */import"./createLucideIcon-BXz5zsdN.js";import"./triangle-alert-D1In3kIi.js";import"./eye-D1j9lGVu.js";import"./shield-CpYDa7Ju.js";import"./circle-alert-BuTutxtS.js";import"./map-pin-BohvRHeB.js";import"./mail-Ti8-EjQn.js";import"./dialog-DCX_5GXu.js";import"./index-CVoKwWwS.js";import"./check-aK--ux3n.js";function Y({employees:u}){const{flash:o}=v().props;f.useEffect(()=>{o?.success&&c.success("نجح",o.success),o?.error&&c.error("خطأ",o.error)},[o]);const{data:t,setData:l,post:b,processing:m,errors:r}=g({employee_id:"",date:new Date().toISOString().split("T")[0],check_in:"",check_out:"",total_hours:"",overtime:"",status:"present",notes:""}),j=s=>{s.preventDefault();const a={...t};a.check_in||delete a.check_in,a.check_out||delete a.check_out,a.total_hours||delete a.total_hours,a.overtime||delete a.overtime,a.notes||delete a.notes,b("/employees/attendance",{data:a,onSuccess:()=>{c.success("تم الإنشاء بنجاح","تم إضافة سجل الحضور بنجاح"),n.visit("/employees/attendance")},onError:x=>{x.message?c.error("خطأ في الإنشاء",x.message):c.error("خطأ في الإنشاء","يرجى التحقق من البيانات المدخلة")}})};return e.jsxs(N,{children:[e.jsx(y,{title:"إضافة سجل حضور جديد"}),e.jsxs("div",{className:"space-y-6 mt-2 -mx-1 sm:-mx-2 lg:-mx-3 xl:-mx-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>n.visit("/employees/attendance"),children:e.jsx(S,{className:"h-4 w-4"})}),e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(h,{className:"h-6 w-6"}),"إضافة سجل حضور جديد"]})]})}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs(k,{children:[e.jsx(C,{children:e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-5 w-5"}),"معلومات الحضور"]})}),e.jsx(D,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["الموظف ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(p,{options:u.map(s=>({value:s.id.toString(),label:`${s.name} (${s.employee_number})`})),value:t.employee_id,onValueChange:s=>l("employee_id",s),placeholder:"اختر الموظف",searchPlaceholder:"ابحث عن الموظف...",emptyText:"لا يوجد موظفين",error:!!r.employee_id}),r.employee_id&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.employee_id})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["التاريخ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(i,{type:"date",value:t.date,onChange:s=>l("date",s.target.value),className:`pr-10 ${r.date?"border-red-500":""}`})]}),r.date&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"وقت الدخول"}),e.jsx(i,{type:"time",value:t.check_in,onChange:s=>l("check_in",s.target.value),placeholder:"HH:MM"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"وقت الخروج"}),e.jsx(i,{type:"time",value:t.check_out,onChange:s=>l("check_out",s.target.value),placeholder:"HH:MM"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"إجمالي الساعات"}),e.jsx(i,{type:"number",step:"0.01",min:"0",value:t.total_hours,onChange:s=>l("total_hours",s.target.value),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"ساعات إضافية"}),e.jsx(i,{type:"number",step:"0.01",min:"0",value:t.overtime,onChange:s=>l("overtime",s.target.value),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["الحالة ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(p,{options:[{value:"present",label:"حاضر"},{value:"absent",label:"غائب"},{value:"late",label:"متأخر"},{value:"half_day",label:"نصف يوم"},{value:"on_leave",label:"في إجازة"}],value:t.status,onValueChange:s=>l("status",s),placeholder:"اختر الحالة",searchPlaceholder:"ابحث...",emptyText:"لا توجد نتائج"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"ملاحظات"}),e.jsxs("div",{className:"relative",children:[e.jsx(H,{className:"absolute right-3 top-3 h-4 w-4 text-gray-400"}),e.jsx("textarea",{value:t.notes,onChange:s=>l("notes",s.target.value),rows:3,className:"w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-gray-800 dark:text-white",placeholder:"أدخل أي ملاحظات عن الحضور"})]})]})]})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t",children:[e.jsx(d,{type:"button",variant:"outline",onClick:()=>n.visit("/employees/attendance"),disabled:m,children:"إلغاء"}),e.jsxs(d,{type:"submit",disabled:m,className:"flex items-center gap-2 bg-[#913D95] hover:bg-[#7A2F7D]",children:[e.jsx(T,{className:"h-4 w-4"}),m?"جاري الحفظ...":"حفظ السجل"]})]})]})]})]})}export{Y as default};
