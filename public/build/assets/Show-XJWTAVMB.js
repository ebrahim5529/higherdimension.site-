import{u as p,r as g,j as e,H as j,a as i}from"./app-JuT9i8Nu.js";import{D as f}from"./DashboardLayout-Mi_rkm2X.js";import{C as c,b as d,c as l,a as n}from"./card-Bylfs8ZR.js";import{B as a}from"./button-B5dkCZVx.js";import{s as o}from"./use-toast-C27QhTIZ.js";import{A as u}from"./arrow-right-CWlsITH9.js";import{P as N}from"./pen-C060pPXL.js";import{C as b}from"./circle-check-big-Bc2bEpKu.js";import{T as y}from"./trash-2-3iDRTGBH.js";import{P as v}from"./printer-CDKtDgB1.js";/* empty css            */import"./createLucideIcon-Dpb_xsff.js";import"./triangle-alert-0jWxApMi.js";import"./x-DUMZ2MyZ.js";import"./file-text-3qDLBxfl.js";import"./eye-YLqfSfxG.js";import"./shield-_HwMWS0e.js";import"./circle-alert-BNQrC8hC.js";import"./map-pin-7nJQb0p0.js";import"./mail-CaIkmxaV.js";const k={draft:"مسودة",posted:"مرحّل",cancelled:"ملغي"},w={draft:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",posted:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",cancelled:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"},C={payment:"دفعة",contract:"عقد",salary:"راتب",purchase:"مشتريات",other:"أخرى"};function O({entry:s}){const{flash:r}=p().props;g.useEffect(()=>{r?.success&&o.success("نجح",r.success),r?.error&&o.error("خطأ",r.error)},[r]);const x=()=>{confirm("هل أنت متأكد من ترحيل هذا القيد؟ لا يمكن التراجع عن هذا الإجراء.")&&i.post(`/accounting/journal-entries/${s.id}/post`)},m=()=>{confirm("هل أنت متأكد من حذف هذا القيد؟")&&i.delete(`/accounting/journal-entries/${s.id}`)};return e.jsxs(f,{children:[e.jsx(j,{title:`قيد ${s.entry_number}`}),e.jsxs("div",{className:"space-y-6 mt-2 -mx-1 sm:-mx-2 lg:-mx-3 xl:-mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(a,{variant:"ghost",onClick:()=>i.visit("/accounting/journal-entries"),className:"p-2",children:e.jsx(u,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:["قيد ",s.entry_number,e.jsx("span",{className:`text-sm px-3 py-1 rounded-full ${w[s.status]}`,children:k[s.status]})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:s.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.status==="draft"&&e.jsxs(e.Fragment,{children:[e.jsxs(a,{variant:"outline",onClick:()=>i.visit(`/accounting/journal-entries/${s.id}/edit`),className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-4 w-4"}),"تعديل"]}),e.jsxs(a,{onClick:x,className:"bg-green-600 hover:bg-green-700 text-white flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4"}),"ترحيل"]}),e.jsxs(a,{variant:"outline",onClick:m,className:"text-red-600 border-red-300 hover:bg-red-50 flex items-center gap-2",children:[e.jsx(y,{className:"h-4 w-4"}),"حذف"]})]}),e.jsxs(a,{variant:"outline",onClick:()=>window.print(),className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-4 w-4"}),"طباعة"]})]})]}),e.jsxs(c,{children:[e.jsx(d,{children:e.jsx(l,{children:"بيانات القيد"})}),e.jsx(n,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"رقم القيد"}),e.jsx("div",{className:"font-mono font-bold text-lg",children:s.entry_number})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"التاريخ"}),e.jsx("div",{className:"font-bold",children:new Date(s.date).toLocaleDateString("ar-SA")})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"أنشئ بواسطة"}),e.jsx("div",{className:"font-bold",children:s.creator?.name||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"تاريخ الإنشاء"}),e.jsx("div",{className:"font-bold",children:new Date(s.created_at).toLocaleDateString("ar-SA")})]}),s.reference_type&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"نوع المرجع"}),e.jsx("div",{className:"font-bold",children:C[s.reference_type]||s.reference_type})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"رقم المرجع"}),e.jsx("div",{className:"font-bold",children:s.reference_id||"-"})]})]})]})})]}),e.jsxs(c,{children:[e.jsx(d,{children:e.jsx(l,{children:"بنود القيد"})}),e.jsx(n,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-500 w-8",children:"#"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-500",children:"رمز الحساب"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-500",children:"اسم الحساب"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-500",children:"مدين"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-500",children:"دائن"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-500",children:"ملاحظة"})]})}),e.jsx("tbody",{children:s.items.map((t,h)=>e.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[e.jsx("td",{className:"py-3 px-4 text-gray-400",children:h+1}),e.jsx("td",{className:"py-3 px-4 font-mono",children:t.account.code}),e.jsx("td",{className:"py-3 px-4",children:t.account.name}),e.jsx("td",{className:"py-3 px-4 font-mono",children:Number(t.debit)>0?Number(t.debit).toLocaleString("ar-SA",{minimumFractionDigits:2}):"-"}),e.jsx("td",{className:"py-3 px-4 font-mono",children:Number(t.credit)>0?Number(t.credit).toLocaleString("ar-SA",{minimumFractionDigits:2}):"-"}),e.jsx("td",{className:"py-3 px-4 text-gray-500",children:t.description||"-"})]},t.id))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"border-t-2 border-gray-300 dark:border-gray-600 font-bold",children:[e.jsx("td",{colSpan:3,className:"py-3 px-4",children:"الإجمالي"}),e.jsx("td",{className:"py-3 px-4 font-mono",children:Number(s.total_debit).toLocaleString("ar-SA",{minimumFractionDigits:2})}),e.jsx("td",{className:"py-3 px-4 font-mono",children:Number(s.total_credit).toLocaleString("ar-SA",{minimumFractionDigits:2})}),e.jsx("td",{})]})})]})})})]})]})]})}export{O as default};
