import{u as f,a as v,b as N,j as e,H as y,r as d}from"./app-ClyPG4XB.js";import{D as C,B as h,a as k}from"./DashboardLayout-BP-LRFzf.js";import{C as w,b as D,c as S,a as E}from"./card-BZJIMjco.js";import{B as x}from"./button-BMwVA_QT.js";import{I as m}from"./input-D1Hoh4mi.js";import{s as c}from"./use-toast-BJ0Tf_9x.js";import{C as u}from"./combobox-JGaEnkPn.js";import{A as _}from"./arrow-left-BnaAt96G.js";import{M as T}from"./map-pin-Ss4l2HZx.js";import{S as A}from"./save-DCR3fPiR.js";/* empty css            */import"./createLucideIcon-DtSzf8_u.js";import"./triangle-alert-CrLr_4Lc.js";import"./file-text-6wZ5Vq-w.js";import"./eye-C8yWxAwb.js";import"./mail-ChU-aeZa.js";import"./dialog-BE-C1bFK.js";import"./index-BKpMQYe7.js";import"./check-BdoiB24u.js";function X({department:a,managers:b}){const{flash:o}=f().props;v.useEffect(()=>{o?.success&&c.success("نجح",o.success),o?.error&&c.error("خطأ",o.error)},[o]);const{data:t,setData:r,put:j,processing:n,errors:i}=N({name:a.name,code:a.code,manager_id:a.manager_id?.toString()||"",description:a.description||"",status:a.status,location:a.location||"",budget:a.budget.toString()}),g=s=>{s.preventDefault();const l={...t};l.manager_id||delete l.manager_id,l.description||delete l.description,l.location||delete l.location,j(`/employees/departments/${a.id}`,{data:l,onSuccess:()=>{c.success("تم التحديث بنجاح","تم تحديث القسم بنجاح"),d.visit(`/employees/departments/${a.id}`)},onError:p=>{p.message?c.error("خطأ في التحديث",p.message):c.error("خطأ في التحديث","يرجى التحقق من البيانات المدخلة")}})};return e.jsxs(C,{children:[e.jsx(y,{title:"تعديل القسم"}),e.jsxs("div",{className:"space-y-6 mt-2 -mx-1 sm:-mx-2 lg:-mx-3 xl:-mx-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(x,{variant:"ghost",size:"sm",onClick:()=>d.visit("/employees/departments"),children:e.jsx(_,{className:"h-4 w-4"})}),e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(h,{className:"h-6 w-6"}),"تعديل القسم"]})]})}),e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs(w,{children:[e.jsx(D,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-5 w-5"}),"معلومات القسم"]})}),e.jsx(E,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["اسم القسم ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{type:"text",value:t.name,onChange:s=>r("name",s.target.value),placeholder:"أدخل اسم القسم",className:i.name?"border-red-500":""}),i.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["رمز القسم ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{type:"text",value:t.code,onChange:s=>r("code",s.target.value),placeholder:"أدخل رمز القسم",className:i.code?"border-red-500":""}),i.code&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.code})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"المدير"}),e.jsx(u,{options:b.map(s=>({value:s.id.toString(),label:`${s.name} (${s.position})`})),value:t.manager_id,onValueChange:s=>r("manager_id",s),placeholder:"اختر المدير",searchPlaceholder:"ابحث عن المدير...",emptyText:"لا يوجد مديرين"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["الحالة ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(u,{options:[{value:"ACTIVE",label:"نشط"},{value:"INACTIVE",label:"غير نشط"}],value:t.status,onValueChange:s=>r("status",s),placeholder:"اختر الحالة",searchPlaceholder:"ابحث...",emptyText:"لا توجد نتائج"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"الموقع"}),e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(m,{type:"text",value:t.location,onChange:s=>r("location",s.target.value),placeholder:"أدخل موقع القسم",className:"pr-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"الميزانية"}),e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(m,{type:"number",step:"0.01",min:"0",value:t.budget,onChange:s=>r("budget",s.target.value),placeholder:"0.00",className:"pr-10"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"الوصف"}),e.jsx("textarea",{value:t.description,onChange:s=>r("description",s.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-gray-800 dark:text-white",placeholder:"أدخل وصف القسم"})]})]})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t",children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>d.visit("/employees/departments"),disabled:n,children:"إلغاء"}),e.jsxs(x,{type:"submit",disabled:n,className:"flex items-center gap-2 bg-[#913D95] hover:bg-[#7A2F7D]",children:[e.jsx(A,{className:"h-4 w-4"}),n?"جاري الحفظ...":"حفظ التعديلات"]})]})]})]})]})}export{X as default};
