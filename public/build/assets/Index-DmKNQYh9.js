import{b as D,r as a,j as e,H as I,a as m}from"./app-84_vxQdS.js";import{D as z,P as f,X as T}from"./DashboardLayout-BlAKKRWk.js";import{C as N,a as g,b,d as y}from"./card-eaxFl7Bs.js";import{B as r}from"./button-BjYYNMND.js";import{I as v}from"./input-Cl715XOF.js";import{s as w}from"./use-toast-CojTFCbM.js";import{M as H}from"./map-pin-BohvRHeB.js";import{P as M}from"./pencil-CE0Wl-FO.js";import{T as B}from"./trash-2-CcbwMLJr.js";/* empty css            */import"./createLucideIcon-BXz5zsdN.js";import"./triangle-alert-D1In3kIi.js";import"./file-text-1z2HdD-B.js";import"./eye-D1j9lGVu.js";import"./shield-CpYDa7Ju.js";import"./circle-alert-BuTutxtS.js";import"./mail-Ti8-EjQn.js";function Z(){const{governorates:o,errors:i,flash:t}=D().props,[d,x]=a.useState(""),[l,h]=a.useState(null),[p,c]=a.useState(""),j=a.useMemo(()=>[...o||[]].sort((s,n)=>s.name.localeCompare(n.name)),[o]);a.useEffect(()=>{t?.success&&w.success("تم بنجاح",t.success),t?.error&&w.error("خطأ",t.error)},[t]);const C=()=>{x("")},k=s=>{s.preventDefault(),m.post("/locations/governorates",{name:d},{onSuccess:()=>C()})},E=s=>{h(s.id),c(s.name)},u=()=>{h(null),c("")},S=s=>{s.preventDefault(),l&&m.put(`/locations/governorates/${l}`,{name:p},{onSuccess:()=>u()})},P=s=>{confirm("هل أنت متأكد من حذف هذه المحافظة؟ سيتم حذف الولايات والمناطق التابعة لها.")&&m.delete(`/locations/governorates/${s}`)};return e.jsxs(z,{children:[e.jsx(I,{title:"المحافظات"}),e.jsxs("div",{className:"space-y-6 mt-2 -mx-1 sm:-mx-2 lg:-mx-3 xl:-mx-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"المحافظات"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"إدارة محافظات سلطنة عمان"})]})}),e.jsxs(N,{children:[e.jsx(g,{children:e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-5 w-5"}),"إضافة محافظة"]})}),e.jsx(y,{children:e.jsxs("form",{onSubmit:k,className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["اسم المحافظة ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(v,{value:d,onChange:s=>x(s.target.value),placeholder:"مثال: محافظة الداخلية",className:i?.name?"border-red-500":""}),i?.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.name})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(r,{type:"submit",className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-4 w-4"}),"إضافة"]})})]})})]}),e.jsxs(N,{children:[e.jsx(g,{children:e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5"}),"قائمة المحافظات"]})}),e.jsx(y,{className:"space-y-4",children:j.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"لا توجد محافظات بعد."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-gray-500 border-b",children:[e.jsx("th",{className:"text-right py-2 px-3",children:"المحافظة"}),e.jsx("th",{className:"text-right py-2 px-3 w-40",children:"الإجراءات"})]})}),e.jsx("tbody",{children:j.map(s=>e.jsxs("tr",{className:"border-b last:border-0",children:[e.jsx("td",{className:"py-3 px-3",children:l===s.id?e.jsxs("form",{onSubmit:S,className:"flex items-center gap-2",children:[e.jsx(v,{value:p,onChange:n=>c(n.target.value),className:"h-9"}),e.jsx(r,{type:"submit",size:"sm",children:"حفظ"}),e.jsx(r,{type:"button",variant:"ghost",size:"sm",onClick:u,children:e.jsx(T,{className:"h-4 w-4"})})]}):e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:s.name})}),e.jsx("td",{className:"py-3 px-3",children:l===s.id?null:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(r,{type:"button",size:"sm",variant:"outline",onClick:()=>E(s),className:"flex items-center gap-1",children:[e.jsx(M,{className:"h-3 w-3"}),"تعديل"]}),e.jsxs(r,{type:"button",size:"sm",variant:"destructive",onClick:()=>P(s.id),className:"flex items-center gap-1",children:[e.jsx(B,{className:"h-3 w-3"}),"حذف"]})]})})]},s.id))})]})})})]})]})]})}export{Z as default};
