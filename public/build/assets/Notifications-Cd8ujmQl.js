import{j as e,H as j,a as l}from"./app-84_vxQdS.js";import{D as u,k as d,l as m}from"./DashboardLayout-BlAKKRWk.js";import{C as i,d as n}from"./card-eaxFl7Bs.js";import{B as c}from"./button-BjYYNMND.js";import{s as a}from"./use-toast-CojTFCbM.js";import{c as b}from"./createLucideIcon-BXz5zsdN.js";import{C as N}from"./circle-check-big-DpEAepVP.js";import{T as k}from"./trash-2-CcbwMLJr.js";import{S as y}from"./shield-check-CJ5ef5ZR.js";import{C as f}from"./circle-alert-BuTutxtS.js";/* empty css            */import"./triangle-alert-D1In3kIi.js";import"./file-text-1z2HdD-B.js";import"./eye-D1j9lGVu.js";import"./shield-CpYDa7Ju.js";import"./map-pin-BohvRHeB.js";import"./mail-Ti8-EjQn.js";const w=b("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);function P({notifications:r}){const x=s=>{switch(s){case"new_device":return e.jsx(f,{className:"h-5 w-5 text-yellow-600"});case"two_factor_enabled":return e.jsx(y,{className:"h-5 w-5 text-green-600"});default:return e.jsx(d,{className:"h-5 w-5 text-blue-600"})}},o=s=>{switch(s){case"new_device":return"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800";case"two_factor_enabled":return"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800";default:return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"}},h=s=>{l.post(`/notifications/${s}/read`,{},{onSuccess:()=>{a.success("نجح","تم تحديد الإشعار كمقروء")},onError:()=>{a.error("خطأ","فشل تحديد الإشعار كمقروء")}})},g=()=>{l.post("/notifications/read-all",{},{onSuccess:()=>{a.success("نجح","تم تحديد جميع الإشعارات كمقروءة")},onError:()=>{a.error("خطأ","فشل تحديد الإشعارات كمقروءة")}})},p=s=>{confirm("هل أنت متأكد من حذف هذا الإشعار؟")&&l.delete(`/notifications/${s}`,{onSuccess:()=>{a.success("نجح","تم حذف الإشعار")},onError:()=>{a.error("خطأ","فشل حذف الإشعار")}})},t=r.data.filter(s=>!s.read_at).length;return e.jsxs(u,{children:[e.jsx(j,{title:"الإشعارات الأمنية"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{className:"h-6 w-6 text-[#58d2c8]"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"الإشعارات الأمنية"}),t>0&&e.jsxs(m,{variant:"destructive",className:"mr-2",children:[t," غير مقروء"]})]}),t>0&&e.jsxs(c,{onClick:g,variant:"outline",size:"sm",children:[e.jsx(w,{className:"h-4 w-4 ml-2"}),"تحديد الكل كمقروء"]})]}),r.data.length>0?e.jsx("div",{className:"space-y-4",children:r.data.map(s=>e.jsx(i,{className:`${s.read_at?"bg-white dark:bg-gray-800":o(s.type)}`,children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:x(s.type)}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:s.title}),!s.read_at&&e.jsx(m,{variant:"default",className:"bg-blue-600",children:"جديد"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:s.message}),s.device_info&&e.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1",children:[s.device_info.device_name&&e.jsxs("span",{className:"block",children:["الجهاز: ",s.device_info.device_name]}),s.ip_address&&e.jsxs("span",{className:"block",children:["IP: ",s.ip_address]})]})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-3",children:new Date(s.created_at).toLocaleString("ar-SA",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!s.read_at&&e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>h(s.id),title:"تحديد كمقروء",children:e.jsx(N,{className:"h-4 w-4"})}),e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>p(s.id),title:"حذف",children:e.jsx(k,{className:"h-4 w-4 text-red-600"})})]})]})})]})})},s.id))}):e.jsx(i,{children:e.jsxs(n,{className:"p-12 text-center",children:[e.jsx(d,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"لا توجد إشعارات"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"لم يتم العثور على أي إشعارات أمنية حتى الآن."})]})})]})]})}export{P as default};
