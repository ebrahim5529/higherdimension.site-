import{u as g,a as f,b as y,j as e,H as N,r as m}from"./app-DFtrbPYD.js";import{D as C,T as u,c as h}from"./DashboardLayout-AgcAz2tm.js";import{C as _,b as k,c as w,a as T}from"./card-CxCwspN_.js";import{B as c}from"./button-DUrmsIU1.js";import{I as n}from"./input-DnDiZUxm.js";import{s as i}from"./use-toast-CR9TlWKg.js";import{C as p}from"./combobox-B1cLjTDg.js";import{A as D}from"./arrow-left-BHgOn_7b.js";import{F as S}from"./file-text-e0TZweW0.js";import{S as E}from"./save-DlEUtkPr.js";/* empty css            */import"./createLucideIcon-CR-mOVXa.js";import"./triangle-alert-DHuvQP7A.js";import"./eye-Dj-NqbG1.js";import"./mail-CHtHC20c.js";import"./dialog-_xS7wbT2.js";import"./index-_YCkHa5F.js";import"./check-Bx9o7fGb.js";const F=[{value:"performance",label:"أداء"},{value:"bonus",label:"مكافأة"},{value:"overtime",label:"ساعات إضافية"},{value:"commission",label:"عمولة"},{value:"other",label:"أخرى"}];function W({employees:b}){const{flash:o}=g().props;f.useEffect(()=>{o?.success&&i.success("نجح",o.success),o?.error&&i.error("خطأ",o.error)},[o]);const{data:a,setData:t,post:v,processing:d,errors:r}=y({employee_id:"",incentive_type:"performance",amount:"",reason:"",date:new Date().toISOString().split("T")[0],status:"pending",approved_by:"",approved_date:"",notes:""}),j=s=>{s.preventDefault();const l={...a};l.approved_by||delete l.approved_by,l.approved_date||delete l.approved_date,l.notes||delete l.notes,v("/employees/incentives",{data:l,onSuccess:()=>{i.success("تم الإنشاء بنجاح","تم إضافة الحافز بنجاح"),m.visit("/employees/incentives")},onError:x=>{x.message?i.error("خطأ في الإنشاء",x.message):i.error("خطأ في الإنشاء","يرجى التحقق من البيانات المدخلة")}})};return e.jsxs(C,{children:[e.jsx(N,{title:"إضافة حافز جديد"}),e.jsxs("div",{className:"space-y-6 mt-2 -mx-1 sm:-mx-2 lg:-mx-3 xl:-mx-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>m.visit("/employees/incentives"),children:e.jsx(D,{className:"h-4 w-4"})}),e.jsx("div",{children:e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(u,{className:"h-6 w-6"}),"إضافة حافز جديد"]})})]})}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs(_,{children:[e.jsx(k,{children:e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-5 w-5"}),"معلومات الحافز"]})}),e.jsx(T,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["الموظف ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(p,{options:b.map(s=>({value:s.id.toString(),label:`${s.name} (${s.employee_number})`})),value:a.employee_id,onValueChange:s=>t("employee_id",s),placeholder:"اختر الموظف",searchPlaceholder:"ابحث عن الموظف...",emptyText:"لا يوجد موظفين",error:!!r.employee_id}),r.employee_id&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.employee_id})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["نوع الحافز ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(p,{options:F.map(s=>({value:s.value,label:s.label})),value:a.incentive_type,onValueChange:s=>t("incentive_type",s),placeholder:"اختر نوع الحافز",searchPlaceholder:"ابحث...",emptyText:"لا توجد نتائج"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["المبلغ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(n,{type:"number",step:"0.01",min:"0",value:a.amount,onChange:s=>t("amount",s.target.value),placeholder:"0.00",className:r.amount?"border-red-500":""}),r.amount&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.amount})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["التاريخ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(h,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(n,{type:"date",value:a.date,onChange:s=>t("date",s.target.value),className:`pr-10 ${r.date?"border-red-500":""}`})]}),r.date&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.date})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"السبب"}),e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:"absolute right-3 top-3 h-4 w-4 text-gray-400"}),e.jsx("textarea",{value:a.reason,onChange:s=>t("reason",s.target.value),rows:3,className:"w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-gray-800 dark:text-white",placeholder:"أدخل سبب الحافز"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["الحالة ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(p,{options:[{value:"pending",label:"في الانتظار"},{value:"approved",label:"موافق عليه"},{value:"rejected",label:"مرفوض"}],value:a.status,onValueChange:s=>t("status",s),placeholder:"اختر الحالة",searchPlaceholder:"ابحث...",emptyText:"لا توجد نتائج"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"الموافق عليه من"}),e.jsx(n,{type:"text",value:a.approved_by,onChange:s=>t("approved_by",s.target.value),placeholder:"اسم الموافق"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"تاريخ الموافقة"}),e.jsxs("div",{className:"relative",children:[e.jsx(h,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(n,{type:"date",value:a.approved_date,onChange:s=>t("approved_date",s.target.value),className:"pr-10"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"ملاحظات"}),e.jsx("textarea",{value:a.notes,onChange:s=>t("notes",s.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-gray-800 dark:text-white",placeholder:"أدخل أي ملاحظات عن الحافز"})]})]})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t",children:[e.jsx(c,{type:"button",variant:"outline",onClick:()=>m.visit("/employees/incentives"),disabled:d,children:"إلغاء"}),e.jsxs(c,{type:"submit",disabled:d,className:"flex items-center gap-2 bg-[#913D95] hover:bg-[#7A2F7D]",children:[e.jsx(E,{className:"h-4 w-4"}),d?"جاري الحفظ...":"حفظ الحافز"]})]})]})]})]})}export{W as default};
