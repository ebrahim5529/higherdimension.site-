import{j as e,a as x,u as R,H as M,r as y}from"./app-uh3WkadV.js";import{T as C,W as z,a as D,P as E,S as V,e as _,b as F,D as $,f as B}from"./DashboardLayout-Dvh8V3Uw.js";import{C as O}from"./circle-check-big-XsMc1Q5c.js";import{D as q}from"./user-CL340Af9.js";import{T as H}from"./triangle-alert-CsgZCVjT.js";import{C as Q,b as U,c as W,a as G}from"./card-BfLzK-Hw.js";import{B as i}from"./button-BAXvYJWN.js";import{D as J}from"./download-DIfNrTlN.js";import{F as K}from"./filter-CtyTs-bt.js";import{C as X}from"./chevron-up-CkzCohDW.js";import{E as Y}from"./eye-CjKyrNFs.js";import{S as Z}from"./square-pen-C07wjfeh.js";import{T as ee}from"./trash-2-EcW9I13S.js";import{C as re}from"./chevron-left-CkFodV7g.js";import{C as ae}from"./confirm-dialog-BwqtLwCk.js";import{s as p}from"./use-toast-NUY9uFV9.js";/* empty css            */function te({stats:t}){return t?e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 hover:bg-primary/5 hover:border-primary/30 hover:shadow-lg hover:shadow-primary/20 hover:scale-105 transition-all duration-300 cursor-pointer group min-h-[100px]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm text-gray-600 dark:text-gray-400 group-hover:text-primary transition-colors duration-300 font-almarai mb-2",children:"السقالات المتوفرة"}),e.jsx("div",{className:"text-2xl font-bold text-primary group-hover:text-primary/80 transition-colors duration-300 font-tajawal",children:t.availableScaffolds||0}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["من إجمالي ",t.totalScaffolds||0," سقالة"]})]}),e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg group-hover:bg-primary/20 transition-all duration-300",children:e.jsx(O,{className:"h-5 w-5 text-primary group-hover:scale-110 transition-transform duration-300"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 hover:bg-primary/5 hover:border-primary/30 hover:shadow-lg hover:shadow-primary/20 hover:scale-105 transition-all duration-300 cursor-pointer group min-h-[100px]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm text-gray-600 dark:text-gray-400 group-hover:text-primary transition-colors duration-300 font-almarai mb-2",children:"السقالات المستأجرة"}),e.jsx("div",{className:"text-2xl font-bold text-primary group-hover:text-primary/80 transition-colors duration-300 font-tajawal",children:t.rentedScaffolds||0}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["بقيمة ",t.rentedValue?.toLocaleString()||0," ر.ع"]})]}),e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg group-hover:bg-primary/20 transition-all duration-300",children:e.jsx(C,{className:"h-5 w-5 text-primary group-hover:scale-110 transition-transform duration-300"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 hover:bg-primary/5 hover:border-primary/30 hover:shadow-lg hover:shadow-primary/20 hover:scale-105 transition-all duration-300 cursor-pointer group min-h-[100px]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm text-gray-600 dark:text-gray-400 group-hover:text-primary transition-colors duration-300 font-almarai mb-2",children:"السقالات المباعة"}),e.jsx("div",{className:"text-2xl font-bold text-primary group-hover:text-primary/80 transition-colors duration-300 font-tajawal",children:t.soldScaffolds||0}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["بقيمة ",t.soldValue?.toLocaleString()||0," ر.ع"]})]}),e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg group-hover:bg-primary/20 transition-all duration-300",children:e.jsx(q,{className:"h-5 w-5 text-primary group-hover:scale-110 transition-transform duration-300"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 hover:bg-primary/5 hover:border-primary/30 hover:shadow-lg hover:shadow-primary/20 hover:scale-105 transition-all duration-300 cursor-pointer group min-h-[100px]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm text-gray-600 dark:text-gray-400 group-hover:text-primary transition-colors duration-300 font-almarai mb-2",children:"تحت الصيانة"}),e.jsx("div",{className:"text-2xl font-bold text-primary group-hover:text-primary/80 transition-colors duration-300 font-tajawal",children:t.maintenanceScaffolds||0}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[t.maintenanceDueItems||0," تحتاج صيانة"]})]}),e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg group-hover:bg-primary/20 transition-all duration-300",children:e.jsx(z,{className:"h-5 w-5 text-primary group-hover:scale-110 transition-transform duration-300"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 hover:bg-primary/5 hover:border-primary/30 hover:shadow-lg hover:shadow-primary/20 hover:scale-105 transition-all duration-300 cursor-pointer group min-h-[100px]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm text-gray-600 dark:text-gray-400 group-hover:text-primary transition-colors duration-300 font-almarai mb-2",children:"السقالات المحجوزة"}),e.jsx("div",{className:"text-2xl font-bold text-primary group-hover:text-primary/80 transition-colors duration-300 font-tajawal",children:t.reservedScaffolds||0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"محجوزة للعملاء"})]}),e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg group-hover:bg-primary/20 transition-all duration-300",children:e.jsx(D,{className:"h-5 w-5 text-primary group-hover:scale-110 transition-transform duration-300"})})]})}),t.lowStockItems>0&&e.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-orange-200 dark:border-orange-700 hover:bg-orange-50 dark:hover:bg-orange-900/20 hover:border-orange-300 dark:hover:border-orange-600 hover:shadow-lg hover:shadow-orange-200/20 hover:scale-105 transition-all duration-300 cursor-pointer group min-h-[100px]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm text-orange-600 dark:text-orange-400 group-hover:text-orange-700 dark:group-hover:text-orange-300 transition-colors duration-300 font-almarai mb-2",children:"مخزون منخفض"}),e.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400 group-hover:text-orange-700 dark:group-hover:text-orange-300 transition-colors duration-300 font-tajawal",children:t.lowStockItems||0}),e.jsx("p",{className:"text-xs text-orange-500 dark:text-orange-400 mt-1",children:"يحتاج إعادة تزويد"})]}),e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg group-hover:bg-orange-200 dark:group-hover:bg-orange-900/50 transition-all duration-300",children:e.jsx(H,{className:"h-5 w-5 text-orange-600 dark:text-orange-400 group-hover:scale-110 transition-transform duration-300"})})]})})]})}):e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-full"})]})})})})}function se({data:t,onAddScaffold:j,onEditScaffold:o,onDeleteScaffold:v,onViewScaffold:h,onExportScaffolds:l}){const[d,b]=x.useState(""),[c,N]=x.useState(!1),[n,u]=x.useState(1),g=10,m=t.filter(a=>{const s=a;if(d){const w=d.toLowerCase(),P=a.scaffoldNumber?.toLowerCase()||"",T=s.description_ar?.toLowerCase()||s.descriptionAr?.toLowerCase()||"",I=s.description_en?.toLowerCase()||s.descriptionEn?.toLowerCase()||"";if(!P.includes(w)&&!T.includes(w)&&!I.includes(w))return!1}return!0}),r=Math.ceil(m.length/g),f=(n-1)*g,k=f+g,S=m.slice(f,k),A=a=>({AVAILABLE:"متوفرة",RENTED:"مستأجرة",SOLD:"مباعة",MAINTENANCE:"صيانة",RESERVED:"محجوزة"})[a]||a,L=a=>({AVAILABLE:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",RENTED:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",SOLD:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",MAINTENANCE:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",RESERVED:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"})[a]||"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";return e.jsxs(Q,{children:[e.jsx(U,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(W,{children:"قائمة السقالات"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(i,{variant:"outline",size:"sm",onClick:l,className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4"}),"تصدير"]}),e.jsxs(i,{onClick:j,className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4"}),"إضافة معدة"]})]})]})}),e.jsxs(G,{children:[e.jsxs("div",{className:"mb-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(V,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:"البحث في السقالات...",value:d,onChange:a=>b(a.target.value),className:"w-full pr-10 pl-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-gray-800"})]}),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>N(!c),className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4"}),"فلترة",c?e.jsx(X,{className:"h-4 w-4"}):e.jsx(_,{className:"h-4 w-4"})]})]}),c&&e.jsx("div",{className:"p-3 sm:p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"لا توجد فلاتر متاحة حالياً"})})]}),e.jsx("div",{className:"rounded-md border overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[800px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-gray-50 dark:bg-gray-800",children:[e.jsx("th",{className:"px-2 py-3 text-right text-sm font-medium text-gray-900 dark:text-gray-100 whitespace-nowrap",children:"كود الصنف"}),e.jsx("th",{className:"px-2 py-3 text-right text-sm font-medium text-gray-900 dark:text-gray-100 whitespace-nowrap",children:"الكمية"}),e.jsx("th",{className:"px-2 py-3 text-right text-sm font-medium text-gray-900 dark:text-gray-100 whitespace-nowrap",children:"الوصف العربي"}),e.jsx("th",{className:"px-2 py-3 text-right text-sm font-medium text-gray-900 dark:text-gray-100 whitespace-nowrap",children:"الوصف الإنجليزي"}),e.jsx("th",{className:"px-2 py-3 text-right text-sm font-medium text-gray-900 dark:text-gray-100 whitespace-nowrap",children:"الإيجار اليومي"}),e.jsx("th",{className:"px-2 py-3 text-right text-sm font-medium text-gray-900 dark:text-gray-100 whitespace-nowrap",children:"الإيجار الشهري"}),e.jsx("th",{className:"px-2 py-3 text-right text-sm font-medium text-gray-900 dark:text-gray-100 whitespace-nowrap",children:"الحالة"}),e.jsx("th",{className:"px-2 py-3 text-right text-sm font-medium text-gray-900 dark:text-gray-100 whitespace-nowrap",children:"الإجراءات"})]})}),e.jsx("tbody",{children:S.length>0?S.map(a=>{const s=a;return e.jsxs("tr",{className:"border-b hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[e.jsx("td",{className:"px-2 py-3 text-sm",children:e.jsx("div",{className:"font-medium text-primary",children:a.scaffoldNumber})}),e.jsx("td",{className:"px-2 py-3 text-sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium",children:a.quantity}),e.jsxs("div",{className:"text-xs text-gray-500",children:["متاح: ",a.availableQuantity]})]})}),e.jsx("td",{className:"px-2 py-3 text-sm",children:e.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300 max-w-xs truncate",title:s.descriptionAr||s.description_ar||"",children:s.descriptionAr||s.description_ar||"—"})}),e.jsx("td",{className:"px-2 py-3 text-sm",children:e.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300 max-w-xs truncate",title:s.descriptionEn||s.description_en||"",children:s.descriptionEn||s.description_en||"—"})}),e.jsx("td",{className:"px-2 py-3 text-sm",children:e.jsxs("div",{className:"text-sm font-medium text-primary",children:[a.dailyRentalPrice.toLocaleString()," ر.ع"]})}),e.jsx("td",{className:"px-2 py-3 text-sm",children:e.jsxs("div",{className:"text-sm font-medium text-primary",children:[a.monthlyRentalPrice.toLocaleString()," ر.ع"]})}),e.jsx("td",{className:"px-2 py-3 text-sm",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${L(a.status)}`,children:A(a.status)})}),e.jsx("td",{className:"px-2 py-3 text-sm",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>h(a),className:"h-8 w-8 p-0 hover:bg-blue-100 dark:hover:bg-blue-900",title:"عرض التفاصيل",children:e.jsx(Y,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>o(a),className:"h-8 w-8 p-0 hover:bg-green-100 dark:hover:bg-green-900",title:"تعديل",children:e.jsx(Z,{className:"h-4 w-4 text-green-600 dark:text-green-400"})}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>v(a),className:"h-8 w-8 p-0 hover:bg-red-100 dark:hover:bg-red-900",title:"حذف",children:e.jsx(ee,{className:"h-4 w-4 text-red-600 dark:text-red-400"})})]})})]},a.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"h-24 text-center text-muted-foreground",children:"لا توجد سقالات"})})})]})})}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["عرض ",f+1," إلى"," ",Math.min(k,m.length)," ","من ",m.length," معدة"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>u(Math.max(1,n-1)),disabled:n===1,className:"flex items-center gap-1",children:[e.jsx(F,{className:"h-4 w-4"}),"السابق"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-sm",children:"صفحة"}),e.jsxs("span",{className:"font-medium",children:[n," من ",r]})]}),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>u(Math.min(r,n+1)),disabled:n===r,className:"flex items-center gap-1",children:["التالي",e.jsx(re,{className:"h-4 w-4"})]})]})]})]})]})}function fe({scaffolds:t,stats:j}){const{flash:o}=R().props,[v,h]=x.useState(!1),[l,d]=x.useState(null);x.useEffect(()=>{o?.success&&p.success("نجح",o.success),o?.error&&p.error("خطأ",o.error)},[o]);const b=t.map(r=>({id:r.id.toString(),scaffoldNumber:r.scaffoldNumber,type:r.type,size:r.size,material:r.material,condition:r.condition,status:r.status,quantity:r.quantity,availableQuantity:r.availableQuantity,location:r.location,sellingPrice:r.sellingPrice,dailyRentalPrice:r.dailyRentalPrice,monthlyRentalPrice:r.monthlyRentalPrice,entryDate:r.entryDate,lastMaintenanceDate:r.lastMaintenanceDate,nextMaintenanceDate:r.nextMaintenanceDate,hasImages:r.hasImages,hasAttachments:r.hasAttachments,notes:r.notes,supplierName:r.supplierName,createdAt:r.createdAt,updatedAt:r.updatedAt,descriptionAr:r.descriptionAr,descriptionEn:r.descriptionEn})),c=()=>{y.visit("/inventory/create")},N=r=>{y.visit(`/inventory/${r.id}/edit`)},n=r=>{d(r),h(!0)},u=()=>{l&&y.delete(`/inventory/${l.id}`,{onSuccess:()=>{p.success("تم الحذف بنجاح",`تم حذف المعدة "${l.scaffoldNumber}" بنجاح`),h(!1),d(null)},onError:r=>{p.error("فشل الحذف",r?.message||"حدث خطأ أثناء حذف المعدة")}})},g=r=>{y.visit(`/inventory/${r.id}`)},m=()=>{p.info("قريباً","سيتم إضافة ميزة التصدير قريباً")};return e.jsxs($,{children:[e.jsx(M,{title:"إدارة المخزون"}),e.jsxs("div",{className:"w-full space-y-6 mt-2 -mx-1 sm:-mx-2 lg:-mx-3 xl:-mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5"}),e.jsx("h2",{className:"text-xl font-semibold",children:"المخزون"})]}),e.jsxs(i,{onClick:c,className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4"}),"إضافة معدة جديد"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5"}),e.jsx("h2",{className:"text-xl font-semibold",children:"إحصائيات المخزون"})]}),e.jsx(te,{stats:j})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5"}),e.jsx("h2",{className:"text-xl font-semibold",children:"السقالات"})]}),e.jsx(se,{data:b,onAddScaffold:c,onEditScaffold:N,onDeleteScaffold:n,onViewScaffold:g,onExportScaffolds:m})]}),e.jsx(ae,{open:v,onOpenChange:h,onConfirm:u,title:"تأكيد حذف المعدة",description:`هل أنت متأكد من حذف المعدة "${l?.scaffoldNumber}"؟ لا يمكن التراجع عن هذا الإجراء.`,confirmText:"حذف",cancelText:"إلغاء",variant:"danger"})]})]})}export{fe as default};
