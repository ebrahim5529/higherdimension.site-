import{u as S,r as d,j as e,H as F,a}from"./app-DC70pVjm.js";import{D as _,P as D,S as T}from"./DashboardLayout-hjp-9ivh.js";import{C as r,a as l,b as B,c as E}from"./card-DdBhtchT.js";import{B as x}from"./button-CCsAHJj1.js";import{I as n}from"./input-DMs8wDeE.js";import{s as N}from"./use-toast-weOckxar.js";import{F as $}from"./filter-F_yL7SdF.js";import{F as f}from"./file-text-j4Qn0fru.js";import{E as L}from"./eye-DDqfhxOU.js";import{P}from"./pen-ClsSBSbJ.js";import{C as A}from"./circle-check-big-Cvk465Yi.js";import{T as H}from"./trash-2-C7a61DKz.js";/* empty css            */import"./createLucideIcon-gXsaNq4V.js";import"./triangle-alert-Dwooo7My.js";import"./shield-5CH0y752.js";import"./circle-alert-CnKodfJj.js";import"./map-pin-BBAWf8o9.js";import"./mail-BERZcaE2.js";const I={draft:"مسودة",posted:"مرحّل",cancelled:"ملغي"},J={draft:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",posted:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",cancelled:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"};function le({entries:s,filters:i}){const{flash:c}=S().props,[o,m]=d.useState(i.search||""),[h,g]=d.useState(i.status||""),[p,j]=d.useState(i.date_from||""),[u,y]=d.useState(i.date_to||"");d.useEffect(()=>{c?.success&&N.success("نجح",c.success),c?.error&&N.error("خطأ",c.error)},[c]);const b=()=>{a.get("/accounting/journal-entries",{search:o||void 0,status:h||void 0,date_from:p||void 0,date_to:u||void 0},{preserveState:!0})},v=()=>{m(""),g(""),j(""),y(""),a.get("/accounting/journal-entries")},k=t=>{confirm("هل أنت متأكد من حذف هذا القيد؟")&&a.delete(`/accounting/journal-entries/${t}`)},w=t=>{confirm("هل أنت متأكد من ترحيل هذا القيد؟ لا يمكن التراجع عن هذا الإجراء.")&&a.post(`/accounting/journal-entries/${t}/post`)};return e.jsxs(_,{children:[e.jsx(F,{title:"القيود المحاسبية"}),e.jsxs("div",{className:"space-y-6 mt-2 -mx-1 sm:-mx-2 lg:-mx-3 xl:-mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"القيود المحاسبية"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"إدارة وعرض جميع القيود المحاسبية"})]}),e.jsxs(x,{onClick:()=>a.visit("/accounting/journal-entries/create"),className:"bg-[#58d2c8] hover:bg-[#4AB8B3] text-white flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4"}),"إنشاء قيد جديد"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(r,{children:e.jsxs(l,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.total}),e.jsx("div",{className:"text-sm text-gray-500",children:"إجمالي القيود"})]})}),e.jsx(r,{children:e.jsxs(l,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:s.data.filter(t=>t.status==="draft").length}),e.jsx("div",{className:"text-sm text-gray-500",children:"مسودات"})]})}),e.jsx(r,{children:e.jsxs(l,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.data.filter(t=>t.status==="posted").length}),e.jsx("div",{className:"text-sm text-gray-500",children:"مرحّلة"})]})}),e.jsx(r,{children:e.jsxs(l,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:s.data.filter(t=>t.status==="cancelled").length}),e.jsx("div",{className:"text-sm text-gray-500",children:"ملغاة"})]})})]}),e.jsx(r,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex flex-wrap items-end gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1 block",children:"بحث"}),e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(n,{placeholder:"رقم القيد أو الوصف...",value:o,onChange:t=>m(t.target.value),className:"pr-9",onKeyDown:t=>t.key==="Enter"&&b()})]})]}),e.jsxs("div",{className:"min-w-[150px]",children:[e.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1 block",children:"الحالة"}),e.jsxs("select",{className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm",value:h,onChange:t=>g(t.target.value),children:[e.jsx("option",{value:"",children:"الكل"}),e.jsx("option",{value:"draft",children:"مسودة"}),e.jsx("option",{value:"posted",children:"مرحّل"}),e.jsx("option",{value:"cancelled",children:"ملغي"})]})]}),e.jsxs("div",{className:"min-w-[150px]",children:[e.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1 block",children:"من تاريخ"}),e.jsx(n,{type:"date",value:p,onChange:t=>j(t.target.value)})]}),e.jsxs("div",{className:"min-w-[150px]",children:[e.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1 block",children:"إلى تاريخ"}),e.jsx(n,{type:"date",value:u,onChange:t=>y(t.target.value)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(x,{onClick:b,className:"bg-[#58d2c8] hover:bg-[#4AB8B3] text-white",children:[e.jsx($,{className:"h-4 w-4 ml-1"}),"تصفية"]}),e.jsx(x,{variant:"outline",onClick:v,children:"مسح"})]})]})})}),e.jsxs(r,{children:[e.jsx(B,{children:e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-5 w-5"}),"قائمة القيود"]})}),e.jsx(l,{children:s.data.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(f,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"لا توجد قيود محاسبية"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-500",children:"رقم القيد"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-500",children:"التاريخ"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-500",children:"الوصف"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-500",children:"المدين"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-500",children:"الدائن"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-500",children:"الحالة"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-500",children:"بواسطة"}),e.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-500",children:"إجراءات"})]})}),e.jsx("tbody",{children:s.data.map(t=>e.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[e.jsx("td",{className:"py-3 px-4 font-mono text-sm",children:t.entry_number}),e.jsx("td",{className:"py-3 px-4",children:new Date(t.date).toLocaleDateString("ar-SA")}),e.jsx("td",{className:"py-3 px-4 max-w-[200px] truncate",children:t.description}),e.jsx("td",{className:"py-3 px-4 font-mono",children:Number(t.total_debit).toLocaleString("ar-SA",{minimumFractionDigits:2})}),e.jsx("td",{className:"py-3 px-4 font-mono",children:Number(t.total_credit).toLocaleString("ar-SA",{minimumFractionDigits:2})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${J[t.status]}`,children:I[t.status]})}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-500",children:t.creator?.name||"-"}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>a.visit(`/accounting/journal-entries/${t.id}`),className:"p-1.5 rounded hover:bg-gray-100 dark:hover:bg-gray-700",title:"عرض",children:e.jsx(L,{className:"h-4 w-4 text-gray-500"})}),t.status==="draft"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>a.visit(`/accounting/journal-entries/${t.id}/edit`),className:"p-1.5 rounded hover:bg-gray-100 dark:hover:bg-gray-700",title:"تعديل",children:e.jsx(P,{className:"h-4 w-4 text-blue-500"})}),e.jsx("button",{onClick:()=>w(t.id),className:"p-1.5 rounded hover:bg-green-100 dark:hover:bg-green-900/30",title:"ترحيل",children:e.jsx(A,{className:"h-4 w-4 text-green-500"})}),e.jsx("button",{onClick:()=>k(t.id),className:"p-1.5 rounded hover:bg-red-100 dark:hover:bg-red-900/30",title:"حذف",children:e.jsx(H,{className:"h-4 w-4 text-red-500"})})]})]})})]},t.id))})]})}),s.last_page>1&&e.jsx("div",{className:"flex justify-center gap-1 mt-6",children:s.links.map((t,C)=>e.jsx("button",{onClick:()=>t.url&&a.visit(t.url),disabled:!t.url,className:`px-3 py-1.5 text-sm rounded ${t.active?"bg-[#58d2c8] text-white":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"} ${t.url?"":"opacity-50 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:t.label}},C))})]})})]})]})]})}export{le as default};
