import{u as f,a as y,b as N,j as e,H as _,r as c}from"./app-8gmTTw34.js";import{D as C,T as h}from"./DashboardLayout-DhkYYcHy.js";import{C as k,b as w,c as T,a as S}from"./card-DbSr2bDZ.js";import{B as p}from"./button-jR2lg-Ad.js";import{I as i}from"./input-BTjsHf1Q.js";import{s as m}from"./use-toast-C82IQcBD.js";import{C as x}from"./combobox-RNVymFuc.js";import{A as D}from"./arrow-left-CLgXSwWf.js";import{C as b,F as E}from"./user-DAMzRv9g.js";import{S as $}from"./save-Bc_MJzUQ.js";/* empty css            */import"./eye-BHi5eQqe.js";import"./dialog-CsJ_Z5g7.js";import"./index-CXTtIFfJ.js";import"./check-DTWGydgR.js";const F=[{value:"performance",label:"أداء"},{value:"bonus",label:"مكافأة"},{value:"overtime",label:"ساعات إضافية"},{value:"commission",label:"عمولة"},{value:"other",label:"أخرى"}];function O({incentive:a,employees:v}){const{flash:d}=f().props;y.useEffect(()=>{d?.success&&m.success("نجح",d.success),d?.error&&m.error("خطأ",d.error)},[d]);const{data:t,setData:r,put:j,processing:n,errors:l}=N({employee_id:a.employee_id.toString(),incentive_type:a.incentive_type,amount:a.amount.toString(),reason:a.reason||"",date:a.date,status:a.status,approved_by:a.approved_by||"",approved_date:a.approved_date||"",notes:a.notes||""}),g=s=>{s.preventDefault();const o={...t};o.approved_by||delete o.approved_by,o.approved_date||delete o.approved_date,o.notes||delete o.notes,j(`/employees/incentives/${a.id}`,{data:o,onSuccess:()=>{m.success("تم التحديث بنجاح","تم تحديث الحافز بنجاح"),c.visit(`/employees/incentives/${a.id}`)},onError:u=>{u.message?m.error("خطأ في التحديث",u.message):m.error("خطأ في التحديث","يرجى التحقق من البيانات المدخلة")}})};return e.jsxs(C,{children:[e.jsx(_,{title:"تعديل الحافز"}),e.jsxs("div",{className:"space-y-6 mt-2 -mx-1 sm:-mx-2 lg:-mx-3 xl:-mx-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(p,{variant:"ghost",size:"sm",onClick:()=>c.visit("/employees/incentives"),children:e.jsx(D,{className:"h-4 w-4"})}),e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(h,{className:"h-6 w-6"}),"تعديل الحافز"]})]})}),e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs(k,{children:[e.jsx(w,{children:e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-5 w-5"}),"معلومات الحافز"]})}),e.jsx(S,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["الموظف ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(x,{options:v.map(s=>({value:s.id.toString(),label:`${s.name} (${s.employee_number})`})),value:t.employee_id,onValueChange:s=>r("employee_id",s),placeholder:"اختر الموظف",searchPlaceholder:"ابحث عن الموظف...",emptyText:"لا يوجد موظفين",error:!!l.employee_id}),l.employee_id&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.employee_id})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["نوع الحافز ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(x,{options:F.map(s=>({value:s.value,label:s.label})),value:t.incentive_type,onValueChange:s=>r("incentive_type",s),placeholder:"اختر نوع الحافز",searchPlaceholder:"ابحث...",emptyText:"لا توجد نتائج"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["المبلغ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(i,{type:"number",step:"0.01",min:"0",value:t.amount,onChange:s=>r("amount",s.target.value),placeholder:"0.00",className:l.amount?"border-red-500":""}),l.amount&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.amount})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["التاريخ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(b,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(i,{type:"date",value:t.date,onChange:s=>r("date",s.target.value),className:`pr-10 ${l.date?"border-red-500":""}`})]}),l.date&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.date})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"السبب"}),e.jsxs("div",{className:"relative",children:[e.jsx(E,{className:"absolute right-3 top-3 h-4 w-4 text-gray-400"}),e.jsx("textarea",{value:t.reason,onChange:s=>r("reason",s.target.value),rows:3,className:"w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-gray-800 dark:text-white",placeholder:"أدخل سبب الحافز"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["الحالة ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(x,{options:[{value:"pending",label:"في الانتظار"},{value:"approved",label:"موافق عليه"},{value:"rejected",label:"مرفوض"}],value:t.status,onValueChange:s=>r("status",s),placeholder:"اختر الحالة",searchPlaceholder:"ابحث...",emptyText:"لا توجد نتائج"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"الموافق عليه من"}),e.jsx(i,{type:"text",value:t.approved_by,onChange:s=>r("approved_by",s.target.value),placeholder:"اسم الموافق"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"تاريخ الموافقة"}),e.jsxs("div",{className:"relative",children:[e.jsx(b,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(i,{type:"date",value:t.approved_date,onChange:s=>r("approved_date",s.target.value),className:"pr-10"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"ملاحظات"}),e.jsx("textarea",{value:t.notes,onChange:s=>r("notes",s.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-gray-800 dark:text-white",placeholder:"أدخل أي ملاحظات عن الحافز"})]})]})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t",children:[e.jsx(p,{type:"button",variant:"outline",onClick:()=>c.visit("/employees/incentives"),disabled:n,children:"إلغاء"}),e.jsxs(p,{type:"submit",disabled:n,className:"flex items-center gap-2 bg-[#913D95] hover:bg-[#7A2F7D]",children:[e.jsx($,{className:"h-4 w-4"}),n?"جاري الحفظ...":"حفظ التعديلات"]})]})]})]})]})}export{O as default};
