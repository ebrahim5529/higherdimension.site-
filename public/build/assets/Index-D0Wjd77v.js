import{u as D,a,j as e,H as I,r as m}from"./app-BIhr450z.js";import{D as z,P as f,X as T}from"./DashboardLayout-CBQGaYZE.js";import{C as N,b as g,c as b,a as y}from"./card-DqHn0SPd.js";import{B as r}from"./button-Da4h0f09.js";import{I as v}from"./input-s_lnNt0U.js";import{s as w}from"./use-toast-BrykXac5.js";import{M as H}from"./map-pin-Dv4c3MxI.js";import{P as M}from"./pencil-CIwewTJt.js";import{T as B}from"./trash-2-By4SauNU.js";/* empty css            */import"./createLucideIcon-nuJcrfB5.js";import"./triangle-alert-CDRhZIn-.js";import"./file-text-DVqpShJC.js";import"./eye-B0nuYYN6.js";import"./mail-zT1IJ1Vi.js";function W(){const{governorates:d,errors:c,flash:t}=D().props,[o,x]=a.useState(""),[l,h]=a.useState(null),[p,n]=a.useState(""),j=a.useMemo(()=>[...d||[]].sort((s,i)=>s.name.localeCompare(i.name)),[d]);a.useEffect(()=>{t?.success&&w.success("تم بنجاح",t.success),t?.error&&w.error("خطأ",t.error)},[t]);const C=()=>{x("")},k=s=>{s.preventDefault(),m.post("/locations/governorates",{name:o},{onSuccess:()=>C()})},E=s=>{h(s.id),n(s.name)},u=()=>{h(null),n("")},S=s=>{s.preventDefault(),l&&m.put(`/locations/governorates/${l}`,{name:p},{onSuccess:()=>u()})},P=s=>{confirm("هل أنت متأكد من حذف هذه المحافظة؟ سيتم حذف الولايات والمناطق التابعة لها.")&&m.delete(`/locations/governorates/${s}`)};return e.jsxs(z,{children:[e.jsx(I,{title:"المحافظات"}),e.jsxs("div",{className:"space-y-6 mt-2 -mx-1 sm:-mx-2 lg:-mx-3 xl:-mx-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"المحافظات"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"إدارة محافظات سلطنة عمان"})]})}),e.jsxs(N,{children:[e.jsx(g,{children:e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-5 w-5"}),"إضافة محافظة"]})}),e.jsx(y,{children:e.jsxs("form",{onSubmit:k,className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["اسم المحافظة ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(v,{value:o,onChange:s=>x(s.target.value),placeholder:"مثال: محافظة الداخلية",className:c?.name?"border-red-500":""}),c?.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.name})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(r,{type:"submit",className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-4 w-4"}),"إضافة"]})})]})})]}),e.jsxs(N,{children:[e.jsx(g,{children:e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5"}),"قائمة المحافظات"]})}),e.jsx(y,{className:"space-y-4",children:j.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"لا توجد محافظات بعد."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-gray-500 border-b",children:[e.jsx("th",{className:"text-right py-2 px-3",children:"المحافظة"}),e.jsx("th",{className:"text-right py-2 px-3 w-40",children:"الإجراءات"})]})}),e.jsx("tbody",{children:j.map(s=>e.jsxs("tr",{className:"border-b last:border-0",children:[e.jsx("td",{className:"py-3 px-3",children:l===s.id?e.jsxs("form",{onSubmit:S,className:"flex items-center gap-2",children:[e.jsx(v,{value:p,onChange:i=>n(i.target.value),className:"h-9"}),e.jsx(r,{type:"submit",size:"sm",children:"حفظ"}),e.jsx(r,{type:"button",variant:"ghost",size:"sm",onClick:u,children:e.jsx(T,{className:"h-4 w-4"})})]}):e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:s.name})}),e.jsx("td",{className:"py-3 px-3",children:l===s.id?null:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(r,{type:"button",size:"sm",variant:"outline",onClick:()=>E(s),className:"flex items-center gap-1",children:[e.jsx(M,{className:"h-3 w-3"}),"تعديل"]}),e.jsxs(r,{type:"button",size:"sm",variant:"destructive",onClick:()=>P(s.id),className:"flex items-center gap-1",children:[e.jsx(B,{className:"h-3 w-3"}),"حذف"]})]})})]},s.id))})]})})})]})]})]})}export{W as default};
